(()=>{var e={7663:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var i=a(8081),s=a.n(i),r=a(3645),n=a.n(r),o=a(1667),l=a.n(o),c=new URL(a(4891),a.b),p=n()(s());p.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap);"]);var u=l()(c);p.push([e.id,'body,html{font-family:Noto Sans TC,微軟正黑體,Microsoft JhengHei,sans-serif;height:100vh;padding:0;margin:0}#app,body,html{position:relative}#app .v-enter-active,#app .v-leave-active{transition:opacity .5s}#app .v-enter-from,#app .v-leave-to{opacity:0}#app .v-enter-to,#app .v-leave-from{opacity:1}#app img{display:block;max-width:100%;max-height:100%}#app .icon-shadow{filter:drop-shadow(0 0 2px rgba(189,189,189,.6))}#app [class*=-switch]{padding-top:0;margin-top:0}#app [class*=-switch] .v-input--selection-controls__input{margin:0 auto}#app #map{overflow:hidden;background:none!important;position:absolute;height:100vh;width:100vw}#app #map [role=region]>div:first-child>div:first-child{z-index:103!important}#app #map iframe{height:100vh;width:100vw}#app #map .gm-style-iw.gm-style-iw-c table,#app #map .gm-style-iw.gm-style-iw-c td,#app #map .gm-style-iw.gm-style-iw-c tr{font-family:Noto Sans TC,微軟正黑體,Microsoft JhengHei,sans-serif;border-collapse:collapse!important;border:none!important;padding:5px}#app #map .gm-style-iw.gm-style-iw-c #info-panorama-btn{position:absolute;bottom:25px;right:30px;box-shadow:0 0 5px #3f51b5;background-color:hsla(0,0%,100%,.5)}#app #map .gm-style-iw.gm-style-iw-c #info-panorama-btn i.mdi-eye-arrow-left{text-shadow:-1px -1px 0 #3f51b5,1px -1px 0 #3f51b5,-1px 1px 0 #3f51b5,1px 1px 0 #3f51b5}#app .PCIInfo{position:absolute;top:50px;right:50px}#app .tool-bar{position:absolute;top:0;left:10px;display:inline-flex;z-index:8}#app .tool-bar .searchBox{font-size:130%}#app .tool-bar .searchBox .v-icon{cursor:pointer}#app .tool-bar .searchBox .v-icon.mdi-magnify{color:#999}#app .tool-bar .searchBox .v-input__slot{padding:4px 8px;border-radius:2px;width:330px}#app .tool-bar .searchBox .v-input__slot .v-text-field__slot{padding:0 4px}#app .tool-bar .closeNavMenu{position:relative;top:16px;left:0;margin:0 10px;height:40px;min-height:40px;width:40px;min-width:40px;padding:0;color:#666;border-radius:2px}#app .tool-bar .case-filter{padding:18px 0 0 18px}#app .tool-bar .case-filter .v-chip,#app .tool-bar .case-filter .v-item-group{margin-left:5px}#app .layerMenu{position:absolute;left:10px;bottom:10px}#app .PCILevelMenu.outside{position:absolute;top:45%;transform:translateY(-50%);width:176px;left:20px;filter:drop-shadow(1px,1px,5px,rgba(221,221,221,.5));flex-direction:column}#app .PCILevelMenu .btn,#app .PCILevelMenu .title{text-align:center;line-height:120%;background-color:#4c5f6b;color:#fff;font-size:150%;padding:15px 2px}#app .PCILevelMenu .btn_func>*{cursor:pointer;text-align:center;font-size:16px}#app .PCILevelMenu .btn_func>:hover{filter:grayscale(0)}#app .PCILevelMenu .btn_func .btn.clear{background-color:#00a9a6;filter:grayscale(.3)}#app .PCILevelMenu .btn_func .btn.all{background-color:#4e8099;filter:brightness(.7)}#app .PCILevelMenu .btn_func .btn.all.active{border:1px dashed #2f4f4f;filter:brightness(1)}#app .PCILevelMenu .level{cursor:pointer;box-shadow:inset 0 -1px 2px #ddd;background-color:#fff;filter:brightness(.7);transition:.5s}#app .PCILevelMenu .level:hover{filter:brightness(.8)}#app .PCILevelMenu .level.active{filter:brightness(1)}#app .PCILevelMenu .level .colorBlock{display:flex;justify-content:space-between;padding:0 5px}#app .PCILevelMenu .level .description{text-align:center;padding:8px 2px;line-height:22px}#app .PCILevelMenu .level .layer-switch{transform:scale(.8);margin:auto}#app .PCILevelMenu .level .level-icon{opacity:.7;z-index:-1;padding:5px}#app .PCILevelMenu .PCIType-switch{margin:0 auto;transform:scale(.8)}#app .PCILevelMenu .PCIType-switch .v-input__control{justify-content:center;align-items:center}#app .v-navigation-drawer .distTitle{padding:8px 0 0 0}#app .v-navigation-drawer .distTitle .description{text-align:center;padding:20px 5px 15px 5px;color:#fff}#app .v-navigation-drawer .distTitle .description .name{font-size:180%}#app .v-navigation-drawer .distTitle .description .engName{font-size:120%}#app .v-navigation-drawer.nav-menu{z-index:10}#app .v-navigation-drawer.nav-menu .closeNavMenu{top:0;right:0}#app .v-navigation-drawer.PCI-Info .distTitle{padding-top:50px}#app .v-navigation-drawer.PCI-Info .v-data-table *{padding:0}#app .info-panel{position:absolute;bottom:40px;left:50%;transform:translateX(-50%)}#app .info-panel>*{font-size:12px}#app .info-panel .PCILevel{padding:5px;margin-bottom:4px}#app .info-panel .PCIhist{padding:5px}#app .info-panel .PCIhist .year-select{font-size:14px;height:40px;text-align:center}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot{padding:0 6px;margin:auto}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-select__selections{flex:none}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-select__selections input[id^=input-]{display:none}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-input__append-inner{margin-left:0}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-input__append-inner i.v-icon.mdi-menu-down{font-size:18px}#app .info-panel .month-block .v-slider__ticks-container .v-slider__tick{font-size:12px}#app .info-panel .month-block .v-slider__ticks-container .v-slider__tick .v-slider__tick-label.highlight:before{display:block;content:"";position:absolute;bottom:-15%;right:0;width:5px;height:5px;background-color:red;border-radius:50%;z-index:-1}#app .info-panel .month-block .v-slider__ticks-container .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(-50%)}#app .info-panel .month-block .v-label{margin:0 2px;font-size:12px}#app .info-panel .level-block{padding:0 5px;height:100%;display:flex}#app .info-panel .level-block .level-color{height:8px;padding:0}#app .info-panel .PCIType-switch{margin:0 auto;transform:scale(.8)}#app .info-panel .PCIType-switch .v-input__control{justify-content:center;align-items:center}#app .btn-avatar{margin:10px 0}#app .btn-target{padding:0;background-color:#fff;min-width:40px;width:40px;height:40px;bottom:120px;right:10px}#app .btn_district,#app .btn_layers,#app .btn_panorama{position:absolute;bottom:40px;left:40px;height:80px;background-color:#fff;z-index:5;background-color:#e1f5fe;overflow:hidden}#app .btn_panorama{right:80px;z-index:15}#app .btn_district,#app .btn_district .v-image__image,#app .btn_district>*{transition:.5s,opacity 0s .2s,background-position .2s ease-out}#app .btn_district.hide{opacity:0}#app .btn_district.hide .v-image__image{background-size:158% 158%!important;background-position:48% top!important}#app .btn_district.hide .name{display:none}#app .btn_district .name{position:absolute;bottom:0;text-align:center;width:100%;color:#fff;font-size:120%}#app .btn_district .description{margin:auto;color:#fff}#app .btn_district .description .zhName{text-align:center;font-size:18px}#app .btn_district .description .engName{text-align:center;font-size:12px;letter-spacing:0}#app .btn_layers,#app .btn_panorama{padding:5px}#app .btn_layers .v-btn__content,#app .btn_panorama .v-btn__content{display:flex;flex-direction:column}#app .btn_layers .name,#app .btn_panorama .name{white-space:pre-wrap;text-align:center;font-size:14px}#app .layerOpt{cursor:pointer;display:flex;flex-direction:column;align-items:center;transition:.5s}#app .layerOpt .v-btn{background-color:#eee;padding:0}#app .layerOpt .v-btn .v-btn__content{height:40px;width:40px}#app .layerOpt .name{white-space:pre-wrap;text-align:center;font-size:75%}#app .layerOpt:hover .v-btn{box-shadow:0 0 2px #0d47a1}#app .layerOpt:hover .name{color:#0d47a1}#app .layerOpt.active .v-btn{border:1px solid #0d47a1}#app .layerOpt.active .name{color:#0d47a1}#app .districtMenu{width:320px}#app .districtMenu .area{position:relative;cursor:pointer;filter:brightness(.7)}#app .districtMenu .area:hover{transform:translate(-.2px,-.2px);filter:brightness(1)}#app .districtMenu .area .name{position:absolute;bottom:0;text-align:center;width:100%;color:#fff;font-size:150%}#app .districtMenu .area.other .name{position:relative;color:#3e2723}#app #panorama{position:absolute;z-index:10;top:50%;left:50%;transform:translate(-50%,-50%);width:100vw;height:100vh}#app #panorama .pnlm-controls{background-color:hsla(0,0%,100%,.5);position:absolute;transform:translateZ(9999px) scale(1.2);filter:invert(1)}#app #panorama .pnlm-controls-container{height:100%;right:50px;left:auto}#app #panorama .pnlm-controls-container .pnlm-zoom-controls{bottom:20px}#app #panorama .pnlm-controls-container .pnlm-fullscreen-toggle-button{top:5px}#app #panorama .pnlm-compass{cursor:pointer;right:10px;bottom:104px}#app #panorama .hotSpotIcon{cursor:pointer;width:26px;height:26px;border-radius:50%;background-color:#000}#app #panorama .hotSpotIcon:after{display:block;width:18px;height:18px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);content:"";background-image:url('+u+");background-position:50%;background-size:contain;background-repeat:no-repeat}",""]);const d=p},5852:(e,t,a)=>{"use strict";a(6992),a(8674),a(9601),a(7727);var i=a(144),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("div",{staticStyle:{display:"none"}},[e._v(e._s(e.map?e.map.getZoom():null))]),a("div",{ref:"map",attrs:{id:"map"}}),a("div",{staticClass:"tool-bar"},[a("v-text-field",{staticClass:"searchBox",attrs:{"prepend-inner-icon":"mdi-menu","append-icon":"mdi-magnify","background-color":"#fff",placeholder:"區域或路名"},on:{change:e.search,"click:append":e.search,"click:prepend-inner":function(t){e.showNavMenu=!0}},model:{value:e.listQuery.searchText,callback:function(t){e.$set(e.listQuery,"searchText",t)},expression:"listQuery.searchText"}}),a("v-fade-transition",[e.PCIInfo.list.length?a("v-btn",{staticClass:"closeNavMenu",attrs:{color:"#fff",absolute:"",right:"",tile:""},on:{click:function(t){e.PCIInfo.list=[]}}},[a("v-icon",[e._v("mdi-close")])],1):e._e()],1),e.activeLayer.case?a("div",{staticClass:"case-filter"},[e._l(e.caseTypeListFilter,(function(t,i){return a("v-chip",{key:i,attrs:{"text-color":e.listQuery.caseType==i?"blue":"black"},on:{click:function(t){e.listQuery.caseType=i,e.setCaseLayer()}}},[e._v(e._s(t.name))])})),e.caseTypeList.etc&&-1==e.listQuery.caseType?a("v-chip",{on:{click:function(t){e.listQuery.caseEtc=!e.listQuery.caseEtc}}},[e.listQuery.caseEtc?a("v-icon",{attrs:{color:"blue"}},[e._v("mdi-menu-left")]):a("span",[e._v(" 其他 "),a("v-icon",[e._v("mdi-menu-right")])],1)],1):e._e(),-1!=e.listQuery.caseType?a("span",[e.caseTypeListFilter[e.listQuery.caseType].hasOwnProperty("list")?a("v-menu",{attrs:{bottom:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-chip",e._g(e._b({},"v-chip",s,!1),i),[-1==e.listQuery.caseTypeSpec?a("span",[e._v("分類")]):a("span",[a("span",[e._v(e._s(e.caseTypeListFilter[e.listQuery.caseType].list[e.listQuery.caseTypeSpec]))])]),a("v-icon",{attrs:{right:""}},[e._v("mdi-menu-down")])],1)]}}],null,!1,1591294938)},[a("v-list",{attrs:{dense:"",flat:""}},[a("v-list-item-group",[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-title",{staticClass:"text-center",on:{click:function(t){e.listQuery.caseTypeSpec=-1,e.setCaseLayer()}}},[e._v("全部")])],1),e._l(e.caseTypeListFilter[e.listQuery.caseType].list,(function(t,i){return a("v-list-item",{key:i,staticClass:"pr-2 pl-2",attrs:{dense:""},on:{click:function(t){e.listQuery.caseTypeSpec=i,e.setCaseLayer()}}},[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t))])],1)],1)}))],2)],1)],1):e._e(),a("v-menu",{attrs:{bottom:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-chip",e._g(e._b({},"v-chip",s,!1),i),[-1==e.listQuery.caseLevel?a("span",[e._v("程度")]):a("span",[a("v-icon",{staticClass:"icon-shadow",attrs:{color:e.caseLevel[e.listQuery.caseLevel].color}},[e._v("mdi-map-marker-alert")]),a("span",[e._v(e._s(e.caseLevel[e.listQuery.caseLevel].description))])],1),a("v-icon",{attrs:{right:""}},[e._v("mdi-menu-down")])],1)]}}],null,!1,3024707018)},[a("v-list",{attrs:{dense:"",flat:""}},[a("v-list-item-group",[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-title",{staticClass:"text-center",on:{click:function(t){e.listQuery.caseLevel=-1,e.setCaseLayer()}}},[e._v("全部")])],1),e._l(e.caseLevel,(function(t,i){return a("v-list-item",{key:i,staticClass:"pr-2 pl-2",attrs:{dense:""},on:{click:function(t){e.listQuery.caseLevel=i,e.setCaseLayer()}}},[a("v-list-item-icon",{staticClass:"mt-1 mr-1"},[a("v-icon",{staticClass:"icon-shadow",attrs:{color:t.color}},[e._v("mdi-map-marker-alert")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.description))])],1)],1)}))],2)],1)],1),a("v-chip",{attrs:{"text-color":"red"},on:{click:function(t){e.listQuery.caseType=-1,e.listQuery.caseTypeSpec=-1,e.listQuery.caseLevel=-1,e.setCaseLayer()}}},[e._v("取消")])],1):e._e()],2):e._e(),e.activeLayer.panoramaLayer?a("div",{staticClass:"case-filter"},[a("v-chip",[a("span",[e._v("點雲")]),a("v-switch",{attrs:{flat:"","hide-details":"",dense:""},on:{change:function(t){return e.setPanoramaLayer()}},model:{value:e.listQuery.streetViewPointMode,callback:function(t){e.$set(e.listQuery,"streetViewPointMode",t)},expression:"listQuery.streetViewPointMode"}})],1),e._l(e.panoramaInfo.type,(function(t,i){return a("v-chip",{key:i,attrs:{"text-color":e.listQuery.streetViewType.includes(i)?"blue":"black"},on:{click:function(t){return e.switchPanoramaLayer(i)}}},[e._v(e._s(t.name))])}))],2):e._e()],1),a("v-menu",{attrs:{top:"",rounded:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs,r=t.value;return[a("v-btn",e._g(e._b({staticClass:"btn_district",style:"background-color: "+e.districtList[e.listQuery.distIndex].color+";",attrs:{width:r?160:80,height:"80"}},"v-btn",s,!1),i),[r?a("v-row",e._g(e._b({staticClass:"distTitle",style:"background-color: "+e.districtList[e.listQuery.distIndex].color+";",attrs:{"no-gutters":""}},"v-row",s,!1),i),[a("v-col",{attrs:{cols:"6"}},[a("v-img",{attrs:{src:e.publicPath+"assets/images/district/"+e.districtList[e.listQuery.distIndex].img_S,width:"100%",height:"100%"}})],1),a("v-col",{staticClass:"description",attrs:{cols:"6"}},[a("div",{staticClass:"zhName"},[e._v(e._s(e.districtList[e.listQuery.distIndex].name))]),a("div",{staticClass:"engName"},[e._v(e._s(e.districtList[e.listQuery.distIndex].engName))])])],1):a("div",[a("v-img",{attrs:{src:e.publicPath+"assets/images/district/"+e.districtList[e.listQuery.distIndex].img_L,"max-heigh":"80","max-width":"80"}}),a("div",{staticClass:"name"},[e._v(e._s(e.districtList[e.listQuery.distIndex].name))])],1)],1)]}}]),model:{value:e.showDistrictMenu,callback:function(t){e.showDistrictMenu=t},expression:"showDistrictMenu"}},[a("v-card",{staticClass:"overflow-y-hidden",staticStyle:{background:"transparent"}},[a("v-row",{staticClass:"districtMenu",attrs:{"no-gutters":""}},[e._l(e.districtListFilter,(function(t,i){return a("v-col",{key:i,class:["area",{active:e.listQuery.distIndex==i}],attrs:{cols:"3"}},[a("v-btn",{style:"background-color: "+t.color+";",attrs:{width:"80",height:"80"},on:{click:function(t){return e.setDistIndex(i)}}},[a("v-img",{attrs:{src:e.publicPath+"assets/images/district/"+e.districtList[i].img_L,"max-heigh":"80","max-width":"80"}}),a("div",{staticClass:"name"},[e._v(e._s(t.name))])],1)],1)})),a("v-col",{staticClass:"area other",attrs:{offset:"6",cols:"3"}},[a("v-btn",{attrs:{width:"160",height:"80"}},[a("v-icon",{attrs:{dark:"",size:"40",color:"#BDBDBD"}},[e._v("mdi-layers-off")]),a("div",{staticClass:"name"},[e._v("清除")])],1)],1)],2)],1)],1),a("v-menu",{attrs:{"open-on-hover":"",top:"",rounded:"","offset-x":"",transition:"slide-x-transition",disabled:1==e.showLayerMenu},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({class:["btn_district",{hide:e.showDistrictMenu}],style:"background-color: "+e.districtList[e.listQuery.distIndex].color+";",attrs:{width:"80",height:"80"},on:{click:function(t){t.stopPropagation(),e.showDistrictMenu=!0}}},"v-btn",s,!1),i),[a("v-img",{attrs:{src:e.publicPath+"assets/images/district/"+e.districtList[e.listQuery.distIndex].img_L,"max-heigh":"80","max-width":"80"}}),a("div",{staticClass:"name"},[e._v(e._s(e.districtList[e.listQuery.distIndex].name))])],1)]}}])},[a("v-card",{staticClass:"pa-2 pt-3 overflow-y-hidden"},[a("v-row",{attrs:{dense:""}},[e._l(e.layerList,(function(t,i){return a("v-col",{key:i,class:["layerOpt",{active:e.listQuery.layerType==i}],on:{click:function(t){return e.setLayer(i)}}},[a("v-btn",{attrs:{width:"40",height:"40",small:"",plain:""}},[t.icon.length>0?a("v-icon",{attrs:{dark:"",size:"30",color:t.color}},[e._v(e._s(t.icon))]):t.iconSource.length>0?a("v-img",{attrs:{contain:"",height:"30",src:""+e.publicPath+t.iconSource}}):a("v-icon",{attrs:{dark:"",size:"30",color:t.color}},[e._v("mdi-layers")])],1),a("div",{staticClass:"name"},[e._v(e._s(t.name))])],1)})),a("v-col",{staticClass:"layerOpt",on:{click:function(t){t.stopPropagation(),e.showLayerMenu=!0}}},[a("v-btn",{attrs:{width:"40",height:"40",small:"",plain:""}},[a("v-icon",{attrs:{dark:"",size:"30",color:"#BDBDBD"}},[e._v("mdi-layers")])],1),a("div",{staticClass:"name"},[e._v("更多")])],1)],2)],1)],1),a("v-dialog",{attrs:{"content-class":"layerMenu","max-width":"300","hide-overlay":""},model:{value:e.showLayerMenu,callback:function(t){e.showLayerMenu=t},expression:"showLayerMenu"}},[a("v-card",[a("v-btn",{attrs:{icon:"",absolute:"",right:""},on:{click:function(t){e.showLayerMenu=!1}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-card-title",[e._v("詳細圖層")]),a("v-card-text",[a("v-row",{attrs:{dense:""}},e._l(e.layerList,(function(t,i){return a("v-col",{key:i,class:["layerOpt",{active:e.listQuery.layerType==i}],on:{click:function(t){return e.setLayer(i)}}},[a("v-btn",{attrs:{width:"55",height:"55",small:"",plain:""}},[a("v-icon",{attrs:{dark:"",size:"40",color:t.color}},[e._v(e._s(t.icon))])],1),a("div",{staticClass:"name"},[e._v(e._s(t.name))])],1)})),1)],1),a("v-divider",{staticStyle:{margin:"0 15px"}}),a("v-card-title",[e._v("地圖類型")]),a("v-card-text",[a("v-row",{attrs:{justify:"center",dense:""}},e._l(e.mapList,(function(t,i){return a("v-col",{key:i,class:["layerOpt",{active:e.listQuery.mapType==i}],on:{click:function(t){return e.setMapType(i)}}},[a("v-btn",{attrs:{width:"55",height:"55",small:"",plain:""}},[a("v-icon",{attrs:{dark:"",size:"40",color:t.color}},[e._v(e._s(t.icon))])],1),a("div",{staticClass:"name"},[e._v(e._s(t.name))])],1)})),1)],1)],1)],1),"PCI"==e.listQuery.layerType&&e.activeLayer.PCILayer?a("div",{ref:"PCILevelMenu",staticClass:"PCILevelMenu outside"},[a("v-card",{staticClass:"pa-2",attrs:{elevation:"2",height:"80",width:"350"}},[a("v-row",{staticClass:"pa-1",attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"8"}},[a("span",{class:{"grey--text text--lighten-1":!e.activeLayer.PCI}},[e._v("鋪面指標")])]),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"4"}},[a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},on:{change:function(t){e.setPCILayer(),e.setCaseLayer(!0)}},model:{value:e.activeLayer.PCI,callback:function(t){e.$set(e.activeLayer,"PCI",t)},expression:"activeLayer.PCI"}})],1)],1),a("v-divider"),a("v-row",{staticClass:"pa-1",attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"8"}},[a("span",{class:{"grey--text text--lighten-1":!e.activeLayer.case}},[e._v("顯示案件")])]),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"4"}},[a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},on:{change:function(t){e.setPCILayer(),e.setCaseLayer(!0)}},model:{value:e.activeLayer.case,callback:function(t){e.$set(e.activeLayer,"case",t)},expression:"activeLayer.case"}})],1)],1)],1),a("br"),a("div",{staticClass:"title"},[e._v("鋪面狀況指數")]),e._l(e.PCILevelOrder,(function(t){return a("v-row",{key:t,class:["level",{active:e.listQuery.PCILevel.includes(t)}],attrs:{"no-gutters":"",align:"center",justify:"center"}},[a("v-col",{staticClass:"colorBlock",style:"background-color: "+e.PCILevel[t].color+";",attrs:{cols:"8"}},[a("div",{staticClass:"description"},[e._v(e._s(e.PCILevel[t].description))]),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:"",color:"white lighten-1"}},[e._v("mdi-help-circle")])],1)]}}],null,!0)},[a("span",[e._v(e._s(e.PCILevel[t].range))])])],1),a("v-col",{attrs:{cols:"4"}},[a("v-switch",{staticClass:"layer-switch",attrs:{value:t,flat:"","hide-details":"",dense:""},on:{change:function(t){e.activeLayer.PCILayer=!0,e.setPCILayer(),e.setCaseLayer()}},model:{value:e.listQuery.PCILevel,callback:function(t){e.$set(e.listQuery,"PCILevel",t)},expression:"listQuery.PCILevel"}})],1)],1)})),a("br"),a("v-row",{attrs:{"no-gutters":"",dense:""}},e._l(Object.keys(e.areaList),(function(t){return a("v-col",{key:t},[a("v-row",{class:["level",{active:e.listQuery.PCILevel.includes(Number(t))}],style:"background-color: "+e.areaList[t].color+";",attrs:{"no-gutters":"",align:"center",justify:"center"},on:{click:function(a){e.setPCILayer(Number(t)),e.setCaseLayer(!0)}}},[a("v-icon",{staticClass:"level-icon",attrs:{large:"",dark:""}},[e._v(e._s(e.areaList[t].icon))])],1)],1)})),1)],2):e._e(),a("v-navigation-drawer",{staticClass:"PCI-Info",attrs:{width:"400",fixed:"","hide-overlay":""},model:{value:e.PCIInfo.list.length,callback:function(t){e.$set(e.PCIInfo.list,"length",t)},expression:"PCIInfo.list.length"}},[a("template",{slot:"prepend"},[a("v-row",{staticClass:"distTitle",style:"background-color: "+e.districtList[e.listQuery.distIndex].color+";",attrs:{"no-gutters":""}},[a("v-col",[a("v-img",{attrs:{src:e.publicPath+"assets/images/district/"+e.districtList[e.listQuery.distIndex].img_S,width:"100%",height:"100%"}})],1),a("v-col",{staticClass:"description"},[a("div",{staticClass:"name"},[e._v(e._s(e.districtList[e.listQuery.distIndex].name))]),a("div",{staticClass:"engName"},[e._v(e._s(e.districtList[e.listQuery.distIndex].engName))])])],1),a("v-btn",{staticClass:"closeNavMenu",attrs:{color:"#fff",absolute:"",right:"",tile:""},on:{click:function(t){e.PCIInfo.list=[]}}},[a("v-icon",[e._v("mdi-close")])],1)],1),[a("v-card",{staticClass:"pa-0",attrs:{width:"400",flat:""}},[a("v-card-text",[a("v-data-table",{attrs:{headers:e.PCIInfo.headers,items:e.PCIInfo.list,options:{itemsPerPage:e.PCIInfo.list.length},"hide-default-footer":"",dense:""},scopedSlots:e._u([{key:"item.block",fn:function(t){var i=t.item;return[a("span",[e._v(e._s(i.block))]),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,s=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:"",color:"black lighten-1"}},[e._v("mdi-help-circle")])],1)]}}],null,!0)},[a("span",[e._v("序號: "+e._s(i.order)+" / 編號: "+e._s(i.id))])])]}},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{attrs:{color:"red"},on:{click:function(t){return e.delPCIInfo(i)}}},[e._v("mdi-close-thick")])]}}])})],1),a("v-card-subtitle",[a("v-row",[a("v-col",[e._v("選取區塊數："+e._s(e.PCIInfoTotal.total))]),a("v-col",[e._v("面積合計："+e._s(e.PCIInfoTotal.areaTotal))]),a("v-col",[e._v("PCI平均："+e._s(e.PCIInfoTotal.scoreAverage))])],1)],1)],1)]],2),a("v-navigation-drawer",{staticClass:"nav-menu",attrs:{app:"",absolute:"",temporary:""},model:{value:e.showNavMenu,callback:function(t){e.showNavMenu=t},expression:"showNavMenu"}},[a("template",{slot:"prepend"},[a("v-row",{staticClass:"distTitle",style:"background-color: "+e.districtList[e.listQuery.distIndex].color+";",attrs:{"no-gutters":""}},[a("v-col",[a("v-img",{attrs:{src:e.publicPath+"assets/images/district/"+e.districtList[e.listQuery.distIndex].img_S,width:"100%",height:"100%"}})],1),a("v-col",{staticClass:"description"},[a("div",{staticClass:"name"},[e._v(e._s(e.districtList[e.listQuery.distIndex].name))]),a("div",{staticClass:"engName"},[e._v(e._s(e.districtList[e.listQuery.distIndex].engName))])])],1),a("v-btn",{staticClass:"closeNavMenu",attrs:{icon:"",color:"#eee",absolute:"",right:""},on:{click:function(t){e.showNavMenu=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1)],2),a("div",{staticClass:"info-panel"},[a("v-card",{staticClass:"PCILevel",attrs:{elevation:"2",height:"35",width:"350"}},[a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"3"}},[a("span",{staticClass:"text-subtitle-2"},[e._v(e._s(e.layerList[e.listQuery.layerType].name))])]),a("v-col",{attrs:{cols:"7"}},[a("span",{staticClass:"caption"},[e._v("顯示"+e._s(e.layerList[e.listQuery.layerType].description))])]),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"2"}},["PCI"==e.listQuery.layerType?a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},model:{value:e.activeLayer.PCILayer,callback:function(t){e.$set(e.activeLayer,"PCILayer",t)},expression:"activeLayer.PCILayer"}}):"panorama"==e.listQuery.layerType?a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},on:{change:function(t){e.setHistHighlight(),e.setPanoramaLayer()}},model:{value:e.activeLayer.panoramaLayer,callback:function(t){e.$set(e.activeLayer,"panoramaLayer",t)},expression:"activeLayer.panoramaLayer"}}):a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},on:{change:function(t){return e.setDefaultLayer(e.listQuery.layerType)}},model:{value:e.activeLayer[e.listQuery.layerType+"Layer"],callback:function(t){e.$set(e.activeLayer,e.listQuery.layerType+"Layer",t)},expression:"activeLayer[`${listQuery.layerType}Layer`]"}})],1)],1)],1),a("v-card",{directives:[{name:"show",rawName:"v-show",value:e.activeLayer.PCILayer||e.activeLayer.panoramaLayer,expression:"activeLayer.PCILayer || activeLayer.panoramaLayer"}],staticClass:"PCIhist",attrs:{elevation:"2",height:"55",width:"350"}},[a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"3"}},[a("v-select",{staticClass:"year-select",attrs:{items:e.timeSelectList.year,dense:"",solo:"",flat:"","menu-props":{top:!0},disabled:1==e.timeSelectList.year.length},on:{input:function(t){e.setHistHighlight(),e.setPCILayer(),e.setCaseLayer(!0),e.setPanoramaLayer()}},model:{value:e.listQuery.year,callback:function(t){e.$set(e.listQuery,"year",t)},expression:"listQuery.year"}})],1),a("v-divider",{staticStyle:{"z-index":"1"},attrs:{vertical:""}}),a("v-col",{staticClass:"month-block",attrs:{cols:"9","align-self":"center"}},[a("v-slider",{attrs:{label:"月","tick-labels":e.timeSelectList.month,min:1,max:12,step:"1",ticks:"always","track-color":"#BDBDBD","inverse-label":"",dense:"","hide-details":""},on:{change:function(t){e.setPCILayer(),e.setCaseLayer(!0),e.setPanoramaLayer()}},model:{value:e.listQuery.month,callback:function(t){e.$set(e.listQuery,"month",t)},expression:"listQuery.month"}})],1)],1)],1)],1),a("v-menu",{attrs:{bottom:"","min-width":"200px",rounded:"","offset-y":"",disabled:!e.isLogin},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[a("v-btn",e._g({staticClass:"btn-avatar",attrs:{absolute:"",icon:"",large:"",right:"",dark:""},on:{click:function(t){e.isLogin||(e.showLoginDialog=!0)}}},i),[a("v-avatar",{attrs:{color:"#4DB6AC"}},[e.isLogin?a("span",{staticClass:"white--text text-h5"},[e._v(e._s(e.loginInfo.username[0].toUpperCase()))]):a("v-icon",{attrs:{dark:""}},[e._v("mdi-account-circle")])],1)],1)]}}])},[a("v-card",{staticClass:"mt-2"},[a("v-list-item-content",{staticClass:"justify-center"},[a("div",{staticClass:"mx-auto text-center"},[e.isLogin?[a("v-avatar",{staticClass:"my-2",attrs:{color:"#4DB6AC"}},[a("span",{staticClass:"white--text text-h5"},[e._v(e._s(e.loginInfo.username[0].toUpperCase()))])]),a("h3",[e._v(e._s(e.loginInfo.username))]),a("v-divider",{staticClass:"my-3"}),a("v-btn",{attrs:{depressed:"",rounded:"",text:""},on:{click:function(t){e.isLogin=!1,e.$refs.loginForm.reset()}}},[e._v("Logout")])]:e._e()],2)])],1)],1),a("v-btn",{staticClass:"btn-target",attrs:{absolute:"",plain:""},on:{click:function(t){return e.setCenter()}}},[a("v-icon",[e._v("mdi-target")])],1),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.showLoginDialog,callback:function(t){e.showLoginDialog=t},expression:"showLoginDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v("Login")]),a("v-card-text",[a("v-form",{ref:"loginForm"},[a("v-text-field",{attrs:{label:"帳號",rules:e.rules,"hide-details":"auto"},model:{value:e.loginInfo.username,callback:function(t){e.$set(e.loginInfo,"username",t)},expression:"loginInfo.username"}}),a("v-text-field",{attrs:{label:"密碼",type:"password",rules:e.rules,"hide-details":"auto"},model:{value:e.loginInfo.password,callback:function(t){e.$set(e.loginInfo,"password",t)},expression:"loginInfo.password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.showLoginDialog=!1,e.$refs.loginForm.reset()}}},[e._v("取消")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.showLoginDialog=!1,e.isLogin=!0}}},[e._v("確定")])],1)],1)],1),a("transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showPanorama,expression:"showPanorama"}],attrs:{id:"panorama"}},[e.config.localEnv?a("span",[a("v-text-field",{staticClass:"searchBox",staticStyle:{display:"inline-block",width:"180px"},attrs:{"background-color":"#fff",placeholder:"sceneId"},on:{change:function(t){return e.panorama.loadScene(e.testQuery.sceneId)}},model:{value:e.testQuery.sceneId,callback:function(t){e.$set(e.testQuery,"sceneId",t)},expression:"testQuery.sceneId"}}),a("span",[e._v(e._s(this.panoramaTestInfo))])],1):e._e()])]),a("v-fade-transition",[e.showPanorama?a("v-btn",{staticClass:"btn_panorama",attrs:{width:"80",height:"80",color:"#FFCCBC"},on:{click:function(t){return e.showPanoramaLayer()}}},[a("v-icon",{attrs:{dark:"",size:"40",color:"#1B512D"}},[e._v("mdi-map")]),a("div",{staticClass:"name"},[e._v("返回地圖")])],1):e._e()],1),a("v-snackbar",{attrs:{timeout:e.snackbarInfo.timeout,top:"",color:"info"},model:{value:e.snackbarInfo.show,callback:function(t){e.$set(e.snackbarInfo,"show",t)},expression:"snackbarInfo.show"}},[a("v-icon",{staticClass:"mr-2"},[e._v("mdi-alert-circle")]),e._v(e._s(e.snackbarInfo.text))],1),e.loading?a("div",[a("v-overlay",{attrs:{opacity:.5}},[a("v-progress-circular",{attrs:{indeterminate:"",size:48,width:4}})],1)],1):e._e()],1)},r=[],n=a(9726),o=a(4367),l=a(7906),c=a(6198),p=a(5200),u=a(8932),d=a(2032),h=a(9927),v=(a(3112),a(9554),a(1539),a(4747),a(8309),a(2222),a(7941),a(4916),a(5306),a(8559),a(7327),a(9720),a(6699),a(2023),a(9653),a(4944),a(3792),a(2479),a(1249),a(2526),a(1817),a(2772),a(5827),a(3123),a(6977),a(3710),a(8783),a(3948),a(285),a(1637),a(3843),a(1038),a(4603),a(8450),a(8386),a(9714),a(5212),a(5735),a(3753),a(6647),a(561),a(9753),a(3311)),f=a(5153),y=a(4576),m="/testPage/",g="https://lancelin0410.github.io/testPage/",b={202107:7,202108:29,202109:15,202110:4,202111:26,202112:29,202201:30,202202:28,202203:31,202204:20,202205:23,202206:1,202207:3,202208:4},L={apiKey:"",version:"weekly",language:"zh-TW",region:"TW",libraries:["places"]};sessionStorage.devMode||(L.apiKey="AIzaSyAWlK6iMEmfSj-SQFiy2xaG5cBI_Utpl0Y");var I=new v.aN(L);const x={name:"MainPage",data:function(){return{config:{name:"demo",area:0,latLng:{lat:0,lng:0},zoom:0,hotSpotsDebugMode:!1,localEnv:!1},publicPath:m,loading:!1,snackbarInfo:{show:!1,timeout:3e3,text:""},cssTemp:{},isLogin:!1,showLoginDialog:!1,showNavMenu:!1,showDistrictMenu:!1,showPanorama:!1,showLayerMenu:!1,map:null,placeServer:null,kmlLayer:{PCILayer:{},caseLayer:{}},markers:{case:{},panorama:{}},markerPos:null,infoWindow:null,infoPanoramaBtn:null,markerClusterer:null,panorama:null,prevSceneId:[],polyLine:{},listQuery:{mapType:"roadmap",layerType:"PCI",PCILevel:[],caseType:-1,caseTypeSpec:-1,caseLevel:-1,caseEtc:!1,streetViewType:[],streetViewPointMode:!1,distIndex:0,searchText:"",year:2022,month:8},activeLayer:{PCILayer:!0,PCI:!0,case:!1,panoramaLayer:!1},rules:[function(e){return!!e||"請輸入"}],loginInfo:{username:"",password:""},timeSelectList:{year:[2020,2022],month:[1,2,3,4,5,6,7,8,9,10,11,12]},mapList:{roadmap:{name:"地圖",icon:"mdi-map",color:"#2F4858"},hybrid:{name:"衛星",icon:"mdi-satellite",color:"#EDBBB4"}},layerList:{PCI:{type:"PCI",assetsUrl:"",name:"鋪面",description:"鋪面狀況",icon:"mdi-road-variant",color:"#AA9FB1"}},caseTypeList:{},caseLevel:{2:{description:"輕度",color:"#FCFF6C"},1:{description:"中度",color:"#83781B"},0:{description:"重度",color:"#A31621"}},caseLevelOrder:[2,1,0],PCILevel:{6:{description:"很好",range:"85~100",color:"#00B900"},5:{description:"好",range:"70~85",color:"#C1FE00"},4:{description:"尚可",range:"55~70",color:"#FEFE00"},3:{description:"差",range:"40~55",color:"#F40088"},2:{description:"很差",range:"25~40",color:"#F40000"},1:{description:"嚴重",range:"10~25",color:"#A72126"},0:{description:"不合格",range:"0~10",color:"#666666"}},PCILevelOrder:[6,5,4,3,2,1,0],areaList:{7:{description:"變差區域",icon:"mdi-alert",color:"#E91E63"},8:{description:"變好區域",icon:"mdi-thumb-up",color:"#009688"}},districtList:{0:{name:"台北市",engName:"Taipei City",color:"#e2a1ff",img_L:"dist-ll-00.png",img_S:"dist-rs-00.png",position:{lat:25.0374865,lng:121.5647688}}},panoramaInfo:{list:{},type:{},setting:{},hotSpotsList:{},streetViewsJSONUrl:"",hotSpotsJSONUrl:"",monthRestriction:{}},PCIInfo:{headers:[],list:[],regex:{},infoOrder:{}},markerList_test:{},panoramaList_test:{},testQuery:{sceneId:""},panoramaTestInfo:{Pitch:0,Yaw:0,Hfov:0}}},computed:{dateStr:function(){return this.listQuery.year+String(this.listQuery.month).padStart(2,"0")},streetViewList:function(){var e=this;this.listQuery.layerType||this.listQuery.distIndex||this.listQuery.year||this.listQuery.month||this.activeLayer.panoramaLayer;var t,a={},i=(0,d.Z)(this.listQuery.streetViewType);try{var s=function(){var i=t.value;if(!e.panoramaInfo.list.hasOwnProperty(e.listQuery.distIndex)||!e.panoramaInfo.list[e.listQuery.distIndex].hasOwnProperty(i))return"continue";var s,r=e.panoramaInfo.list[e.listQuery.distIndex][i],n=e.layerList.panorama.assetsUrl,o=(0,d.Z)(r);try{var l=function(){var t=s.value;t.forEach((function(s,r){var o="demo"==e.config.name?"".concat(n,"/").concat(i,"/").concat(e.listQuery.distIndex,"/").concat(e.dateStr,"/").concat(s.fileName,".jpg"):"".concat(n,"/").concat(e.listQuery.distIndex,"/").concat(s.fileName,".jpg"),l=0;a[s.fileName]={type:"equirectangular",panorama:o,hfov:e.panoramaInfo.setting[i].hfov,yaw:e.panoramaInfo.setting[i].yaw+l,horizonRoll:e.panoramaInfo.setting[i].horizonRoll,compass:!0,northOffset:s.azimuth,autoLoad:!0};var c=[];if(r>=0&&r<t.length-1&&c.push({pitch:e.panoramaInfo.setting[i].pitch,yaw:e.panoramaInfo.setting[i].yaw+l,type:"scene",text:t[r+1].fileName,sceneId:t[r+1].fileName}),r>0&&r<t.length&&c.push({pitch:e.panoramaInfo.setting[i].pitch,yaw:e.panoramaInfo.setting[i].yaw+180+l,type:"scene",text:t[r-1].fileName,sceneId:t[r-1].fileName,targetYaw:e.panoramaInfo.setting[i].yaw+180+l}),e.panoramaInfo.hotSpotsList.hasOwnProperty(e.listQuery.distIndex)&&e.panoramaInfo.hotSpotsList[e.listQuery.distIndex].hasOwnProperty(i)){var p=e.panoramaInfo.hotSpotsList[e.listQuery.distIndex][i];if(void 0!=p[s.fileName]){var u,h=(0,d.Z)(p[s.fileName]);try{for(h.s();!(u=h.n()).done;){var v=u.value;c.push(v)}}catch(f){h.e(f)}finally{h.f()}}}a[s.fileName]["hotSpots"]=c}))};for(o.s();!(s=o.n()).done;)l()}catch(c){o.e(c)}finally{o.f()}};for(i.s();!(t=i.n()).done;)s()}catch(r){i.e(r)}finally{i.f()}return a},PCIKMLUrl:function(){for(var e=this.layerList.PCI.assetsUrl,t={},a=0,i=[].concat((0,u.Z)(Object.keys(this.PCILevel)),(0,u.Z)(Object.keys(this.areaList)));a<i.length;a++){var s=i[a];"demo"==this.config.name?t[s]="".concat(e,"/").concat(this.dateStr,"/3_1_").concat(this.listQuery.distIndex,"_P").concat(s,"_").concat(b[this.dateStr],".KML"):"freeway"==this.config.name&&(t[s]=e.replace("${level}",s))}return t},caseKMLUrl:function(){for(var e=this.layerList.PCI.assetsUrl,t={},a=0,i=[].concat((0,u.Z)(Object.keys(this.PCILevel)),(0,u.Z)(Object.keys(this.areaList)));a<i.length;a++){var s=i[a];"demo"==this.config.name?t[s]="".concat(e,"/").concat(this.dateStr,"/3_1_").concat(this.listQuery.distIndex,"_1pointP_").concat(s,"_").concat(b[this.dateStr],".KML"):"freeway"==this.config.name&&(t[-1]=e.replace("${level}","Case"))}return t},districtListFilter:function(){var e=this;return Object.fromEntries(Object.entries(this.districtList).filter((function(t){var a=(0,p.Z)(t,2),i=a[0];a[1];return i!=e.listQuery.distIndex})))},caseTypeListFilter:function(){var e=this,t=Object.fromEntries(Object.entries(this.caseTypeList).filter((function(e){var t=(0,p.Z)(e,2),a=t[0];t[1];return"etc"!=a})));return this.listQuery.caseEtc&&Object.assign(t,this.caseTypeList.etc.list),-1!=this.listQuery.caseType&&(t=Object.fromEntries(Object.entries(t).filter((function(t){var a=(0,p.Z)(t,2),i=a[0];a[1];return i==e.listQuery.caseType})))),t},markersFilter:function(){var e=this;this.listQuery.distIndex||this.activeLayer["case"];var t=Object.fromEntries(Object.entries(this.markers["case"]).filter((function(t){var a=(0,p.Z)(t,2),i=a[0];a[1];return e.listQuery.PCILevel.includes(Number(i))})));if(this.listQuery.PCILevel.length>0&&1==Object.keys(this.caseKMLUrl).length&&this.caseKMLUrl.hasOwnProperty("-1")&&(t=this.markers["case"]),-1==this.listQuery.caseType&&-1==this.listQuery.caseLevel&&-1==this.listQuery.caseTypeSpec)return Object.values(t).flat();var a=this.caseTypeListFilter[this.listQuery.caseType],i=[];return-1==this.listQuery.caseTypeSpec?void 0!=a.filter?i=a.filter:i.push(a.name):i.push(a.list[this.listQuery.caseTypeSpec]),-1!=this.listQuery.caseLevel&&(i=i.map((function(t){return t+"（".concat(e.caseLevel[e.listQuery.caseLevel].description,"）")}))),console.log(i),Object.values(t).flat().filter((function(e){var t,a=(0,d.Z)(i);try{for(a.s();!(t=a.n()).done;){var s=t.value;return-1!=e.description.indexOf(s)}}catch(r){a.e(r)}finally{a.f()}}))},PCIInfoTotal:function(){var e=0|this.PCIInfo.list.length,t=this.PCIInfo.list.reduce((function(e,t){return e+Number(t.area)}),0),a=this.PCIInfo.list.reduce((function(e,t){return Number(t.score)?e+=Number(t.score):e+=Number(t.score.split("→")[1]),e}),0)/e;return{total:e,areaTotal:t,scoreAverage:a.toFixed(2)}}},created:function(){var e=this,t=(new Date).getTime();t>sessionStorage.dueTime&&sessionStorage.clear();var a=new URL(window.location.href);this.config.name=a.searchParams.get("c")||"demo",this.config.area=a.searchParams.get("area"),this.config.latLng={lat:Number(a.searchParams.get("lat")),lng:Number(a.searchParams.get("lng"))},this.config.zoom=a.searchParams.get("zoom"),this.listQuery.streetViewPointMode=a.searchParams.has("p")||!1,this.config.hotSpotsDebugMode=a.searchParams.has("h")||!1;var i=this.config.localEnv?"".concat(this.publicPath,"assets/config/").concat(this.config.name,"/").concat(this.config.name,"_local.json"):"https://storage.googleapis.com/map_config/".concat(this.config.name,"/").concat(this.config.name,".json?t=").concat(Date.now());fetch(i).then(function(){var t=(0,c.Z)((0,l.Z)().mark((function t(a){var i,s,r,n;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.json();case 2:for(n in i=t.sent,s=i.layerList,r=i.districtList,e.districtList=r,e.listQuery.distIndex=e.config.area||Object.keys(e.districtList)[0],e.layerList=s,e.layerList)e.kmlLayer.hasOwnProperty("".concat(n,"Layer"))||e.$set(e.kmlLayer,"".concat(n,"Layer"),null),e.activeLayer.hasOwnProperty("".concat(n,"Layer"))||e.$set(e.activeLayer,"".concat(n,"Layer"),!1),e.layerList[n].assetsUrl=e.layerList[n].assetsUrl.replace("${WebUrl}",g);e.caseTypeList=e.layerList.PCI.options.caseTypeList,e.PCIInfo.headers=e.layerList.PCI.options.PCIInfo.headers.filter((function(e){return!["order","id"].includes(e.value)})),e.PCIInfo.regex=e.layerList.PCI.options.PCIInfo.regex,e.layerList.PCI.options.PCIInfo.headers.forEach((function(t,a){return e.PCIInfo.infoOrder[t.value]=a})),e.panoramaInfo.type=s.panorama.options.streetViewType,e.panoramaInfo.streetViewsJSONUrl=s.panorama.options.streetViewJSON,e.panoramaInfo.hotSpotsJSONUrl=s.panorama.options.hotSpotsJSON,e.panoramaInfo.monthRestriction.panorama=s.panorama.options.monthRestriction,e.setHistHighlight(),e.listQuery.streetViewType=Object.keys(e.panoramaInfo.type),window.gm_authFailure=function(){console.log("Google Map Failure"),sessionStorage.devMode=!0,sessionStorage.dueTime=(new Date).getTime()+3e5,location.reload()},I.load().then((function(){return e.initMap()}))["catch"]((function(e){return console.log("err: ",e)}));case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())["catch"]((function(e){console.log(e),window.location.href=a.origin+a.pathname}))},mounted:function(){var e=this;for(var t in this.listQuery.PCILevel=this.PCILevelOrder,this.panorama=pannellum.viewer("panorama",{scenes:{},keyboardZoom:!1,hotSpotDebug:this.config.hotSpotsDebugMode}),this.panoramaList_test)this.panorama.addScene(t,this.panoramaList_test[t]);this.panorama.on("load",(function(){return e.panorama.resize()})),this.panorama.on("animatefinished",(function(){e.panoramaTestInfo={Pitch:e.panorama.getPitch(),Yaw:e.panorama.getYaw(),Hfov:e.panorama.getHfov()}})),this.$el.querySelector("#panorama .pnlm-compass").addEventListener("click",(function(t){var a=e.panorama.getNorthOffset();e.panorama.setYaw(-a),t.stopPropagation()}))},watch:{"activeLayer.PCILayer":function(e){e?(this.activeLayer.PCI=!0,this.activeLayer["case"]=!1,0==this.listQuery.PCILevel.length&&(this.listQuery.PCILevel=this.PCILevelOrder)):(this.activeLayer.PCI=this.activeLayer["case"]=!1,this.listQuery.PCILevel=[],this.PCIInfo.list=[]),this.setPCILayer(),this.setCaseLayer(!0)},"PCIInfo.list":function(e){for(var t=0==e.length,a=this.$refs.PCILevelMenu,i=a.getBoundingClientRect().left,s=Array.from(this.$el.querySelectorAll(".btn_district")),r=[],n=0,o=s;n<o.length;n++){var l=o[n];r.push(l.getBoundingClientRect().left)}if(t){if(this.cssTemp.PCILevelMenu&&(a.style.left="".concat(this.cssTemp.PCILevelMenu,"px")),this.cssTemp.btnDistrict&&0!=this.cssTemp.btnDistrict.length)for(var c in s)s[c].style.left="".concat(this.cssTemp.btnDistrict[c],"px")}else if(i<400&&0==r.filter((function(e){return e>=400})).length)for(var p in this.cssTemp.PCILevelMenu=i,this.cssTemp.btnDistrict=r,a.style.left="".concat(i+400,"px"),s)s[p].style.left="".concat(r[p]+400,"px")}},methods:{initMap:function(){var e=this,t=this.config.latLng.lat&&this.config.latLng.lng?this.config.latLng:this.districtList[this.listQuery.distIndex].position;if(this.map=new google.maps.Map(this.$refs.map,{center:t,zoom:Number(this.config.zoom)||14,maxZoom:19,minZoom:13,fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1,rotateControl:!1,tilt:0,styles:[{stylers:[{visibility:"on"},{lightness:10}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{saturation:-40},{lightness:-5}]},{featureType:"landscape",elementType:"geometry",stylers:[{saturation:-50},{lightness:-5}]}]}),0!=L.apiKey.length){var a=new google.maps.StyledMapType([{stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"}]}],{name:"Labels"});this.map.overlayMapTypes.push(a)}this.placeServer=new google.maps.places.PlacesService(this.map);for(var i=function(){var t=r[s];e.kmlLayer.PCILayer[t]=new google.maps.KmlLayer({url:e.PCIKMLUrl[t],map:e.map,suppressInfoWindows:!0,preserveViewport:!0}),e.kmlLayer.PCILayer[t].addListener("click",(function(a){var i=a.featureData.name,s=t>=7?e.PCIInfo.regex.changed:e.PCIInfo.regex["default"],r=new RegExp(s,"s"),n=i.split(r).filter((function(e){return 0!=e.length})),o=e.PCIInfo.list.some((function(e){return e.order==n[0]}));if(!o){for(var l={},c=0,p=Object.keys(e.PCIInfo.infoOrder);c<p.length;c++){var u=p[c],d=e.PCIInfo.infoOrder[u];l[u]=t<7||"score"!=u?n[d]:"".concat(n[d]," → ").concat(n[d+1])}e.PCIInfo.list.push(l)}}))},s=0,r=[].concat((0,u.Z)(Object.keys(this.PCILevel)),(0,u.Z)(Object.keys(this.areaList)));s<r.length;s++)i();for(var n in this.markerClusterer=new y.XL({map:this.map,markers:[]}),this.infoWindow=new google.maps.InfoWindow({pixelOffset:new google.maps.Size(0,-8)}),this.infoWindow.addListener("domready",(function(){e.infoPanoramaBtn=e.$el.querySelector("#map #info-panorama-btn"),e.infoPanoramaBtn&&e.infoPanoramaBtn.addEventListener("click",e.showCasePanorama)})),this.kmlLayer)"PCILayer"!=n&&"caseLayer"!=n&&(this.kmlLayer[n]=new google.maps.KmlLayer({map:this.map,preserveViewport:!0}));var o=function(t){e.markers[t]=new google.maps.Marker({title:t,position:e.markerList_test[t]}),e.markers[t].addListener("click",(function(a){var i=e.markers[t].getTitle();console.log(i),e.showPanoramaLayer(i)}))};for(var l in this.markerList_test)o(l)},setCenter:function(e){void 0==e&&(e=this.districtList[this.listQuery.distIndex].position),this.map.setCenter(e),this.map.setZoom(13)},setMapType:function(e){this.map.setMapTypeId(e),this.listQuery.mapType=e},search:function(){var e=this;if(0==L.apiKey.length)for(var t in this.districtList)this.listQuery.distIndex!=t&&-1!=this.districtList[t].name.indexOf(this.listQuery.searchText)&&this.setDistIndex(t);else{var a={fields:["geometry"],query:this.listQuery.searchText};this.placeServer.findPlaceFromQuery(a,(function(t,a){a===google.maps.places.PlacesServiceStatus.OK&&t&&e.map.setCenter(t[0].geometry.location),e.map.fitBounds(t[0].geometry.viewport)}))}},setHistHighlight:function(){if(this.$el.querySelectorAll(".month-block .v-slider__tick-label").forEach((function(e){return e.classList.remove("highlight")})),0!=Object.keys(this.panoramaInfo.monthRestriction).length&&void 0!=this.panoramaInfo.monthRestriction[this.listQuery.layerType]){var e=this.panoramaInfo.monthRestriction[this.listQuery.layerType];void 0!=e[this.listQuery.distIndex]&&void 0!=e[this.listQuery.distIndex][this.listQuery.year]&&(e=e[this.listQuery.distIndex][this.listQuery.year],this.$el.querySelectorAll(".month-block .v-slider__tick-label").forEach((function(t,a){e.includes(a+1)&&t.classList.add("highlight")})),this.listQuery.month=e[e.length-1])}},setLayer:function(e){for(var t in this.showLayerMenu=!1,this.clearAllLayer(),this.activeLayer)this.activeLayer[t]=!1;this.activeLayer["".concat(e,"Layer")]=!0;var a=this.layerList[e].type;switch(a){case"PCI":this.setPCILayer();break;case"panorama":this.PCIInfo.list=[],this.setPanoramaLayer();break;case"default":this.PCIInfo.list=[],this.setDefaultLayer(e);break}this.setHistHighlight()},setDistIndex:function(e){this.showDistrictMenu=!1,this.clearAllLayer(),void 0!=e&&(this.listQuery.distIndex=Number(e)),this.setCenter(),this.setHistHighlight(),this.setPCILayer(),this.setCaseLayer(!0),this.setPanoramaLayer()},setPCILayer:function(e){for(var t=0,a=Object.entries(this.kmlLayer.PCILayer);t<a.length;t++){var i=(0,p.Z)(a[t],2),s=(i[0],i[1]);s.setMap(null)}if(this.activeLayer.PCI){-2==e&&(this.listQuery.PCILevel=this.PCILevelOrder),e>=-1&&(this.listQuery.PCILevel=[]),e>-1&&(this.listQuery.PCILevel=[e]);var r=this.listQuery.PCILevel.filter((function(e){return![7,8].includes(e)}));r.length>0&&(this.listQuery.PCILevel=r);var n,o=(0,d.Z)(this.listQuery.PCILevel);try{for(o.s();!(n=o.n()).done;){var l=n.value;console.log(this.PCIKMLUrl[l]),this.kmlLayer.PCILayer[l].setUrl(this.PCIKMLUrl[l]),null==this.kmlLayer.PCILayer[l].getMap()&&this.kmlLayer.PCILayer[l].setMap(this.map)}}catch(c){o.e(c)}finally{o.f()}this.listQuery.layerType="PCI"}},kmlToGeoJson:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.markers["case"][e]=[],void 0!=t.caseKMLUrl[e]){a.next=3;break}return a.abrupt("return",new Promise((function(e,t){return e()})));case 3:return a.next=5,fetch("".concat(t.caseKMLUrl[e],"?t=").concat(Date.now())).then((function(e){return e.text()})).then((function(a){var i,s=(0,f.DS)((new DOMParser).parseFromString(a,"text/xml")),r=(0,d.Z)(s.features);try{var n=function(){var a=i.value,s=new google.maps.LatLng(a.geometry.coordinates[1],a.geometry.coordinates[0]),r=new google.maps.Marker({position:s,description:a.properties.description.value,icon:{url:a.properties.icon.replace("http://taipeinw.bim-group.com/","".concat(t.publicPath,"assets/")),scaledSize:new google.maps.Size(30,30)}});t.markers["case"][e].push(r),r.addListener("click",(function(e){t.markerPos=e.latLng.toJSON();var a=r.description.replace('border="1"','border="0"');a+='<button type="button" id="info-panorama-btn" class="v-btn v-btn--plain theme--light v-size--x-small" style="height: 40px; width: 40px;"><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-eye-arrow-left theme--dark" style="font-size: 30px; color: #FFF; caret-color: #2196F3;"></i></span></button>',t.infoWindow.setContent(a),t.infoWindow.setPosition(e.latLng),t.infoWindow.open(t.map)}))};for(r.s();!(i=r.n()).done;)n()}catch(o){r.e(o)}finally{r.f()}return new Promise((function(e,t){return e()}))}));case 5:case"end":return a.stop()}}),a)})))()},setCaseLayer:function(){var e=arguments,t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s,r,n,o,c;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i=e.length>0&&void 0!==e[0]&&e[0],t.markerClusterer.clearMarkers(),t.activeLayer["case"]){a.next=4;break}return a.abrupt("return");case 4:if(!i){a.next=34;break}t.loading=!0,s=!1,r=!1,a.prev=8,o=(0,h.Z)([-1].concat((0,u.Z)(Object.keys(t.PCILevel)),(0,u.Z)(Object.keys(t.areaList))).map((function(e){return t.kmlToGeoJson(e)})));case 10:return a.next=12,o.next();case 12:if(!(s=!(c=a.sent).done)){a.next=18;break}c.value;case 15:s=!1,a.next=10;break;case 18:a.next=24;break;case 20:a.prev=20,a.t0=a["catch"](8),r=!0,n=a.t0;case 24:if(a.prev=24,a.prev=25,!s||null==o["return"]){a.next=29;break}return a.next=29,o["return"]();case 29:if(a.prev=29,!r){a.next=32;break}throw n;case 32:return a.finish(29);case 33:return a.finish(24);case 34:return t.markerClusterer.addMarkers(t.markersFilter),a.next=37,t.getStreetViewJSON();case 37:t.setPanoramaScene(),t.loading=!1;case 39:case"end":return a.stop()}}),a,null,[[8,20,24,34],[25,,29,33]])})))()},setDefaultLayer:function(e){this.kmlLayer["".concat(e,"Layer")].setMap(null),this.activeLayer["".concat(e,"Layer")]&&(this.kmlLayer["".concat(e,"Layer")].setUrl(this.layerList[e].assetsUrl),null==this.kmlLayer["".concat(e,"Layer")].getMap()&&this.kmlLayer["".concat(e,"Layer")].setMap(this.map),this.listQuery.layerType=e)},setPanoramaLayer:function(){var e=this;return(0,c.Z)((0,l.Z)().mark((function t(){var a,i,s,r,n,o,c,p,u,v,f,y,m,g,b,L,I,x,w,C,k;return(0,l.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=(0,d.Z)(Object.values(e.flattenObj(e.polyLine)).flat());try{for(a.s();!(i=a.n()).done;)s=i.value,s.setMap(null)}catch(l){a.e(l)}finally{a.f()}r=(0,d.Z)(Object.values(e.flattenObj(e.markers.panorama)).flat());try{for(r.s();!(n=r.n()).done;)o=n.value,o.setMap(null)}catch(l){r.e(l)}finally{r.f()}if(e.activeLayer.panoramaLayer){t.next=6;break}return t.abrupt("return");case 6:c=!1,p=!1,t.prev=8,v=(0,h.Z)(e.listQuery.streetViewType.map((function(t){return e.getStreetViewJSON(t)})));case 10:return t.next=12,v.next();case 12:if(!(c=!(f=t.sent).done)){t.next=18;break}f.value;case 15:c=!1,t.next=10;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](8),p=!0,u=t.t0;case 24:if(t.prev=24,t.prev=25,!c||null==v["return"]){t.next=29;break}return t.next=29,v["return"]();case 29:if(t.prev=29,!p){t.next=32;break}throw u;case 32:return t.finish(29);case 33:return t.finish(24);case 34:if(!e.listQuery.streetViewPointMode){t.next=65;break}y=!1,m=!1,t.prev=37,b=(0,h.Z)(e.listQuery.streetViewType.map((function(t){return e.createMarker(t)})));case 39:return t.next=41,b.next();case 41:if(!(y=!(L=t.sent).done)){t.next=47;break}L.value;case 44:y=!1,t.next=39;break;case 47:t.next=53;break;case 49:t.prev=49,t.t1=t["catch"](37),m=!0,g=t.t1;case 53:if(t.prev=53,t.prev=54,!y||null==b["return"]){t.next=58;break}return t.next=58,b["return"]();case 58:if(t.prev=58,!m){t.next=61;break}throw g;case 61:return t.finish(58);case 62:return t.finish(53);case 63:t.next=93;break;case 65:I=!1,x=!1,t.prev=67,C=(0,h.Z)(e.listQuery.streetViewType.map((function(t){return e.createPolyLine(t)})));case 69:return t.next=71,C.next();case 71:if(!(I=!(k=t.sent).done)){t.next=77;break}k.value;case 74:I=!1,t.next=69;break;case 77:t.next=83;break;case 79:t.prev=79,t.t2=t["catch"](67),x=!0,w=t.t2;case 83:if(t.prev=83,t.prev=84,!I||null==C["return"]){t.next=88;break}return t.next=88,C["return"]();case 88:if(t.prev=88,!x){t.next=91;break}throw w;case 91:return t.finish(88);case 92:return t.finish(83);case 93:e.listQuery.layerType="panorama";case 94:case"end":return t.stop()}}),t,null,[[8,20,24,34],[25,,29,33],[37,49,53,63],[54,,58,62],[67,79,83,93],[84,,88,92]])})))()},getStreetViewJSON:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(void 0!=t.panoramaInfo.streetViewsJSONUrl){a.next=2;break}return a.abrupt("return",new Promise((function(e,t){return e()})));case 2:return i=t.panoramaInfo.streetViewsJSONUrl.replace("${publicPath}",t.publicPath).replace("${type}",e).replace("${dist}",t.listQuery.distIndex).replace("${dateStr}",t.dateStr),s="",void 0!=t.panoramaInfo.hotSpotsJSONUrl&&(s=t.panoramaInfo.hotSpotsJSONUrl.replace("${publicPath}",t.publicPath).replace("${type}",e).replace("${dist}",t.listQuery.distIndex).replace("${dateStr}",t.dateStr)),a.next=7,fetch("".concat(i,"?t=").concat(Date.now())).then(function(){var a=(0,c.Z)((0,l.Z)().mark((function a(i){var r;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.panoramaInfo.list[t.listQuery.distIndex]={},i.ok){a.next=5;break}return t.panoramaInfo.list[t.listQuery.distIndex][e]=[],t.panoramaInfo.setting[e]={},a.abrupt("return",new Promise((function(e,t){return e()})));case 5:return a.next=7,i.json();case 7:if(r=a.sent,t.panoramaInfo.list[t.listQuery.distIndex][e]=r.data,t.panoramaInfo.setting[e]=r.sceneSetting,0==s.length){a.next=15;break}return a.next=13,fetch("".concat(s,"?t=").concat(Date.now())).then(function(){var a=(0,c.Z)((0,l.Z)().mark((function a(i){var s;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.panoramaInfo.hotSpotsList[t.listQuery.distIndex]={},i.ok){a.next=6;break}return t.panoramaInfo.hotSpotsList[t.listQuery.distIndex][e]=[],a.abrupt("return",new Promise((function(e,t){return e()})));case 6:return a.next=8,i.json();case 8:return s=a.sent,t.panoramaInfo.hotSpotsList[t.listQuery.distIndex][e]=s.data,a.abrupt("return",new Promise((function(e,t){return e()})));case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 13:a.next=16;break;case 15:return a.abrupt("return",new Promise((function(e,t){return e()})));case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());case 7:case"end":return a.stop()}}),a)})))()},setPanoramaScene:function(){var e,t=(0,d.Z)(this.prevSceneId);try{for(t.s();!(e=t.n()).done;){var a=e.value;this.panorama.removeScene(a)}}catch(s){t.e(s)}finally{t.f()}for(var i in this.prevSceneId=[],this.streetViewList)this.panorama.addScene(i,this.streetViewList[i]),this.prevSceneId.push(i)},createPolyLine:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s,r,n;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.polyLine.hasOwnProperty(t.listQuery.distIndex)||(t.polyLine[t.listQuery.distIndex]={}),t.polyLine[t.listQuery.distIndex][e]=[],i=t.panoramaInfo.list[t.listQuery.distIndex][e],i){a.next=5;break}return a.abrupt("return");case 5:if(t.setPanoramaScene(),t.polyLine[t.listQuery.distIndex][e].length>0){s=(0,d.Z)(t.polyLine[t.listQuery.distIndex][e]);try{for(s.s();!(r=s.n()).done;)n=r.value,n.setMap(t.map)}catch(l){s.e(l)}finally{s.f()}}else i.forEach((function(a,i){t.polyLine[t.listQuery.distIndex][e].push(new google.maps.Polyline({path:a.map((function(e){return e.position})),geodesic:!0,strokeColor:t.panoramaInfo.type[e].color,strokeOpacity:1,strokeWeight:3,map:t.map})),t.polyLine[t.listQuery.distIndex][e][i].addListener("click",(function(a){var s=a.latLng.toJSON(),r=t.panoramaInfo.list[t.listQuery.distIndex][e][i].map((function(e){return(0,o.Z)((0,o.Z)({},e.position),{},{sceneId:e.fileName})})),n=r.reduce((function(e,t){var a=Math.sqrt(Math.pow(s.lat-t.lat,2)+Math.pow(s.lng-t.lng,2));return e.dist>a&&(e.dist=a,e.sceneId=t.sceneId),e}),{dist:1/0,sceneId:""});t.showPanoramaLayer(n.sceneId)}))}));case 7:case"end":return a.stop()}}),a)})))()},createMarker:function(e){var t=this;return(0,c.Z)((0,l.Z)().mark((function a(){var i,s,r,n,o,c,p;return(0,l.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.markers.panorama.hasOwnProperty(t.listQuery.distIndex)||(t.markers.panorama[t.listQuery.distIndex]={}),t.markers.panorama[t.listQuery.distIndex][e]=[],i=t.panoramaInfo.list[t.listQuery.distIndex][e],i){a.next=5;break}return a.abrupt("return");case 5:if(t.setPanoramaScene(),t.markers.panorama[t.listQuery.distIndex][e].length>0){s=(0,d.Z)(t.markers.panorama[t.listQuery.distIndex][e]);try{for(s.s();!(r=s.n()).done;)n=r.value,n.setMap(t.map)}catch(l){s.e(l)}finally{s.f()}}else o=["icon_blueDot.png","icon_greenDot.png","icon_redDot.png","icon_yellowDot.png","icon_greenDot.png"],c=t.listQuery.streetViewType.indexOf(e),p={url:"".concat(t.publicPath,"assets/icon/").concat(o[c]),scaledSize:new google.maps.Size(5,5)},i.forEach((function(a,i){a.forEach((function(a,i){var s=new google.maps.Marker({title:a.fileName,position:a.position,icon:p,map:t.map});t.markers.panorama[t.listQuery.distIndex][e].push(s),s.addListener("click",(function(e){var a=s.getTitle();console.log(a),t.showPanoramaLayer(a)})),s.addListener("mouseover",(function(e){t.infoWindow.setContent(e.latLng.toString()),t.infoWindow.setPosition(e.latLng),t.infoWindow.open(t.map)})),s.addListener("mouseout",(function(e){t.infoWindow.close()}))}))}));case 7:case"end":return a.stop()}}),a)})))()},switchPanoramaLayer:function(e){var t=this.listQuery.streetViewType.filter((function(t){return t!=e}));t.length==this.listQuery.streetViewType.length?this.listQuery.streetViewType.push(e):this.listQuery.streetViewType=t;var a,i=(0,d.Z)(Object.values(this.flattenObj(this.polyLine)).flat());try{for(i.s();!(a=i.n()).done;){var s=a.value;s.setMap(null)}}catch(g){i.e(g)}finally{i.f()}var r,n=(0,d.Z)(Object.values(this.flattenObj(this.markers.panorama)).flat());try{for(n.s();!(r=n.n()).done;){var o=r.value;o.setMap(null)}}catch(g){n.e(g)}finally{n.f()}var l,c=(0,d.Z)(this.listQuery.streetViewType);try{for(c.s();!(l=c.n()).done;){var p=l.value;if(!this.listQuery.streetViewPointMode&&this.polyLine.hasOwnProperty(this.listQuery.distIndex)){var u,h=(0,d.Z)(this.polyLine[this.listQuery.distIndex][p]);try{for(h.s();!(u=h.n()).done;){var v=u.value;v.setMap(this.map)}}catch(g){h.e(g)}finally{h.f()}}if(this.listQuery.streetViewPointMode&&this.markers.panorama.hasOwnProperty(this.listQuery.distIndex)){var f,y=(0,d.Z)(this.markers.panorama[this.listQuery.distIndex][p]);try{for(y.s();!(f=y.n()).done;){var m=f.value;m.setMap(this.map)}}catch(g){y.e(g)}finally{y.f()}}}}catch(g){c.e(g)}finally{c.f()}},showPanoramaLayer:function(e){if(this.showPanorama)return this.showPanorama=!1,void("panorama"==this.listQuery.layerType&&(this.activeLayer.PCILayer=!1,this.activeLayer.panoramaLayer=!0));console.log(e),this.panorama.loadScene(e),this.showPanorama=!0},showCasePanorama:function(e){var t=this;console.log(this.markerPos);var a=this.panoramaInfo.list[this.listQuery.distIndex].flat().map((function(e){return(0,o.Z)((0,o.Z)({},e.position),{},{sceneId:e.fileName})})),i=a.reduce((function(e,a){var i=Math.sqrt(Math.pow(t.markerPos.lat-a.lat,2)+Math.pow(t.markerPos.lng-a.lng,2));return i<1e-4&&e.dist>i&&(e.dist=i,e.sceneId=a.sceneId),e}),{dist:1/0,sceneId:""});console.log(i),0!=i.sceneId.length?this.showPanoramaLayer(i.sceneId):this.showSnackbar("查無街景"),e.stopPropagation()},clearAllLayer:function(){for(var e=0,t=Object.entries(this.kmlLayer.PCILayer);e<t.length;e++){var a=(0,p.Z)(t[e],2),i=(a[0],a[1]);i.setMap(null)}this.markerClusterer.clearMarkers();for(var s=0,r=Object.entries(this.kmlLayer);s<r.length;s++){var n=(0,p.Z)(r[s],2),o=n[0],l=n[1];"PCILayer"!=o&&"caseLayer"!=o&&l.setMap(null)}var c,u=(0,d.Z)(Object.values(this.flattenObj(this.polyLine)).flat());try{for(u.s();!(c=u.n()).done;){var h=c.value;h.setMap(null)}}catch(m){u.e(m)}finally{u.f()}var v,f=(0,d.Z)(Object.values(this.flattenObj(this.markers.panorama)).flat());try{for(f.s();!(v=f.n()).done;){var y=v.value;y.setMap(null)}}catch(m){f.e(m)}finally{f.f()}},delPCIInfo:function(e){var t=this.PCIInfo.list.indexOf(e);this.PCIInfo.list.splice(t,1)},showSnackbar:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.snackbarInfo.text=e,this.snackbarInfo.timeout=t,this.snackbarInfo.show=!0},flattenObj:function(e){var t={};for(var a in e)if("object"!==(0,n.Z)(e[a])||Array.isArray(e[a]))t[a]=e[a];else{var i=this.flattenObj(e[a]);for(var s in i)t["".concat(a,".").concat(s)]=i[s]}return t}}},w=x;a(5940);var C=a(1001),k=a(3453),_=a.n(k),P=a(3167),Q=a(1578),T=a(8704),M=a(2371),S=a(7118),A=a(8675),O=a(2102),Z=a(2166),j=a(8366),V=a(8331),N=a(3493),D=a(6232),z=a(4926),B=a(9839),F=a(3920),E=a(8681),$=a(7996),U=a(3632),R=a(459),J=a(1217),K=a(6797),W=a(4042),H=a(6284),Y=a(2877),G=a(2018),X=a(1067),q=a(8766),ee=a(9762),te=a(3180),ae=a(8687),ie=a(6767),se=(0,C.Z)(w,s,r,!1,null,null,null);const re=se.exports;_()(se,{VApp:P.Z,VAvatar:Q.Z,VBtn:T.Z,VCard:M.Z,VCardActions:S.h7,VCardSubtitle:S.Qq,VCardText:S.ZB,VCardTitle:S.EB,VChip:A.Z,VCol:O.Z,VDataTable:Z.Z,VDialog:j.Z,VDivider:V.Z,VFadeTransition:N.Z5,VForm:D.Z,VIcon:z.Z,VImg:B.Z,VList:F.Z,VListItem:E.Z,VListItemContent:$.km,VListItemGroup:U.Z,VListItemIcon:R.Z,VListItemTitle:$.V9,VMenu:J.Z,VNavigationDrawer:K.Z,VOverlay:W.Z,VProgressCircular:H.Z,VRow:Y.Z,VSelect:G.Z,VSlider:X.Z,VSnackbar:q.Z,VSpacer:ee.Z,VSwitch:te.Z,VTextField:ae.Z,VTooltip:ie.Z});var ne=a(8813);i.Z.use(ne.Z);const oe=new ne.Z({});i.Z.config.productionTip=!1,new i.Z({vuetify:oe,render:function(e){return e(re)}}).$mount("#app")},5940:(e,t,a)=>{var i=a(7663);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals);var s=a(4402).Z;s("803d642c",i,!0,{sourceMap:!1,shadowMode:!1})},4891:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABgAAAAYADwa0LPAAAAXElEQVRIx+2RSQoAIAwDjfj/L9eLvSglFRcEOycL2hAnpYAAPYiIuB4A8NxT8ukGQwAa1rwcsJtpB+7FrfXxBsVK1kbWbNH/xLsOvE3fd8CchAPKxw7o4lsOAkoFXMRARtci2gwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjItMDgtMjVUMDg6MjE6MzIrMDA6MDBxteh+AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIyLTA4LTI1VDA4OjIxOjMyKzAwOjAwAOhQwgAAAABJRU5ErkJggg=="}},t={};function a(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={id:i,exports:{}};return e[i](r,r.exports,a),r.exports}a.m=e,(()=>{var e=[];a.O=(t,i,s,r)=>{if(!i){var n=1/0;for(p=0;p<e.length;p++){for(var[i,s,r]=e[p],o=!0,l=0;l<i.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every((e=>a.O[e](i[l])))?i.splice(l--,1):(o=!1,r<n&&(n=r));if(o){e.splice(p--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[i,s,r]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.b=document.baseURI||self.location.href;var e={143:0};a.O.j=t=>0===e[t];var t=(t,i)=>{var s,r,[n,o,l]=i,c=0;if(n.some((t=>0!==e[t]))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)var p=l(a)}for(t&&t(i);c<n.length;c++)r=n[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(p)},i=self["webpackChunkmap_test"]=self["webpackChunkmap_test"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var i=a.O(void 0,[998],(()=>a(5852)));i=a.O(i)})();
//# sourceMappingURL=app.7663d24d.js.map