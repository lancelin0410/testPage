(()=>{var t={7663:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>l});var i=a(8081),s=a.n(i),r=a(3645),n=a.n(r),o=n()(s());o.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap);"]),o.push([t.id,"body,html{font-family:Noto Sans TC,微軟正黑體,Microsoft JhengHei,sans-serif;height:100vh;padding:0;margin:0}#app,body,html{position:relative}#app .v-enter-active,#app .v-leave-active{transition:opacity .5s}#app .v-enter-from,#app .v-leave-to{opacity:0}#app .v-enter-to,#app .v-leave-from{opacity:1}#app img{display:block;max-width:100%;max-height:100%}#app .icon-shadow{filter:drop-shadow(0 0 2px rgba(189,189,189,.6))}#app #map{overflow:hidden;background:none!important;position:absolute;height:100vh;width:100vw}#app #map [role=region]>div:first-child>div:first-child{z-index:150!important}#app #map iframe{height:100vh;width:100vw}#app #map .gm-style-iw.gm-style-iw-c table,#app #map .gm-style-iw.gm-style-iw-c td,#app #map .gm-style-iw.gm-style-iw-c tr{font-family:Noto Sans TC,微軟正黑體,Microsoft JhengHei,sans-serif;border-collapse:collapse!important;border:none!important;padding:5px}#app .PCIInfo{position:absolute;top:50px;right:50px}#app .tool-bar{position:absolute;top:0;left:10px;display:inline-flex}#app .tool-bar .searchBox{font-size:130%}#app .tool-bar .searchBox .v-icon{cursor:pointer}#app .tool-bar .searchBox .v-icon.mdi-magnify{color:#999}#app .tool-bar .searchBox .v-input__slot{padding:4px 8px;border-radius:2px;width:400px;max-width:75vw}#app .tool-bar .searchBox .v-input__slot .v-text-field__slot{padding:0 4px}#app .tool-bar .case-filter{padding:18px 0 0 18px}#app .tool-bar .case-filter .v-chip,#app .tool-bar .case-filter .v-item-group{margin-left:5px}#app .layerMenu{position:absolute;left:10px;bottom:10px}#app .PCILevelMenu.outside{position:absolute;top:45%;transform:translateY(-50%);width:176px;left:20px;filter:drop-shadow(1px,1px,5px,rgba(221,221,221,.5));flex-direction:column}#app .PCILevelMenu .btn,#app .PCILevelMenu .title{text-align:center;line-height:120%;background-color:#4c5f6b;color:#fff;font-size:150%;padding:15px 2px}#app .PCILevelMenu .btn_func>*{cursor:pointer;text-align:center;font-size:16px}#app .PCILevelMenu .btn_func>:hover{filter:grayscale(0)}#app .PCILevelMenu .btn_func .btn.clear{background-color:#00a9a6;filter:grayscale(.3)}#app .PCILevelMenu .btn_func .btn.all{background-color:#4e8099;filter:brightness(.7)}#app .PCILevelMenu .btn_func .btn.all.active{border:1px dashed #2f4f4f;filter:brightness(1)}#app .PCILevelMenu .level{cursor:pointer;box-shadow:inset 0 -1px 2px #ddd;background-color:#fff;filter:brightness(.7);transition:.5s}#app .PCILevelMenu .level:hover{filter:brightness(.8)}#app .PCILevelMenu .level.active{filter:brightness(1)}#app .PCILevelMenu .level .colorBlock{display:flex;justify-content:space-between;padding:0 5px}#app .PCILevelMenu .level .description{text-align:center;padding:10px 2px}#app .PCILevelMenu .level .layer-switch{transform:scale(.8);margin:auto}#app .v-navigation-drawer .distTitle{padding:8px 0 0 0;cursor:pointer}#app .v-navigation-drawer .distTitle .description{text-align:center;padding:20px 5px 15px 5px;color:#fff}#app .v-navigation-drawer .distTitle .description .name{font-size:180%}#app .v-navigation-drawer .distTitle .description .engName{font-size:120%}#app .v-navigation-drawer .closeNavMenu{top:0;right:0}#app .info-panel{position:absolute;bottom:40px;left:50%;transform:translateX(-50%)}#app .info-panel>*{font-size:12px}#app .info-panel .PCILevel{padding:5px;margin-bottom:4px}#app .info-panel .PCIhist{padding:5px}#app .info-panel .PCIhist .year-select{font-size:14px;height:40px;text-align:center}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot{padding:0 6px;margin:auto}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-select__selections{flex:none}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-select__selections input[id^=input-]{display:none}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-input__append-inner{margin-left:0}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-input__append-inner i.v-icon.mdi-menu-down{font-size:18px}#app .info-panel .month-block .v-slider__ticks-container .v-slider__tick{font-size:12px}#app .info-panel .month-block .v-slider__ticks-container .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(-50%)}#app .info-panel .month-block .v-label{margin:0 2px;font-size:12px}#app .info-panel .level-block{padding:0 5px;height:100%;display:flex}#app .info-panel .level-block .level-color{height:8px;padding:0}#app .info-panel .PCIType-switch{margin:0 auto;transform:scale(.8)}#app .info-panel .PCIType-switch .v-input__control{justify-content:center;align-items:center}#app .btn-avatar{margin:10px 0}#app .btn_district,#app .btn_layers,#app .btn_panorama{position:absolute;bottom:40px;left:40px;height:80px;background-color:#fff;z-index:5;background-color:#e1f5fe;overflow:hidden}#app .btn_panorama{right:80px}#app .btn_district,#app .btn_district .v-image__image,#app .btn_district>*{transition:.5s,opacity 0s .2s,background-position .2s ease-out}#app .btn_district.hide{opacity:0}#app .btn_district.hide .v-image__image{background-size:158% 158%!important;background-position:48% top!important}#app .btn_district.hide .name{display:none}#app .btn_district .name{position:absolute;bottom:0;text-align:center;width:100%;color:#fff;font-size:120%}#app .btn_district .description{margin:auto;color:#fff}#app .btn_district .description .zhName{text-align:center;font-size:18px}#app .btn_district .description .engName{text-align:center;font-size:12px;letter-spacing:0}#app .btn_layers,#app .btn_panorama{padding:5px}#app .btn_layers .v-btn__content,#app .btn_panorama .v-btn__content{display:flex;flex-direction:column}#app .btn_layers .name,#app .btn_panorama .name{white-space:pre-wrap;text-align:center;font-size:14px}#app .layerOpt{cursor:pointer;display:flex;flex-direction:column;align-items:center;transition:.5s}#app .layerOpt .v-btn{background-color:#eee;padding:0}#app .layerOpt .v-btn .v-btn__content{height:40px;width:40px}#app .layerOpt .name{white-space:pre-wrap;text-align:center;font-size:75%}#app .layerOpt:hover .v-btn{box-shadow:0 0 2px #0d47a1}#app .layerOpt:hover .name{color:#0d47a1}#app .layerOpt.active .v-btn{border:1px solid #0d47a1}#app .layerOpt.active .name{color:#0d47a1}#app .districtMenu{width:320px}#app .districtMenu .area{position:relative;cursor:pointer;filter:brightness(.7)}#app .districtMenu .area:hover{transform:translate(-.2px,-.2px);filter:brightness(1)}#app .districtMenu .area .name{position:absolute;bottom:0;text-align:center;width:100%;color:#fff;font-size:150%}#app .districtMenu .area.other .name{position:relative;color:#3e2723}#app #panorama{position:absolute;z-index:5;top:50%;left:50%;transform:translate(-50%,-50%);width:100vw;height:100vh}#app #panorama .pnlm-controls{background-color:hsla(0,0%,100%,.5);position:absolute;transform:translateZ(9999px) scale(1.2);filter:invert(1)}#app #panorama .pnlm-controls-container{height:100%;right:50px;left:auto}#app #panorama .pnlm-controls-container .pnlm-zoom-controls{bottom:20px}#app #panorama .pnlm-controls-container .pnlm-fullscreen-toggle-button{top:5px}#app #panorama .pnlm-compass{cursor:pointer;right:10px;bottom:104px}",""]);const l=o},1110:(t,e,a)=>{"use strict";a(6992),a(8674),a(9601),a(7727);var i=a(144),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("div",{ref:"map",attrs:{id:"map"}}),a("v-dialog",{staticClass:"elevation-1",attrs:{"content-class":"PCIInfo","max-width":"650",persistent:"","hide-overlay":""},model:{value:t.PCIInfoList.length,callback:function(e){t.$set(t.PCIInfoList,"length",e)},expression:"PCIInfoList.length"}},[a("v-card",[a("v-card-title",[a("v-btn",{attrs:{icon:"",absolute:"",right:""},on:{click:function(e){t.PCIInfoList=[]}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-card-text",[a("v-data-table",{attrs:{headers:t.PCIInfoHeaders,items:t.PCIInfoList,options:{itemsPerPage:t.PCIInfoList.length},"hide-default-footer":"",dense:""},scopedSlots:t._u([{key:"item.actions",fn:function(e){var i=e.item;return[a("v-icon",{attrs:{color:"red"},on:{click:function(e){return t.delPCIInfo(i)}}},[t._v("mdi-close-thick")])]}}])})],1),a("v-card-subtitle",[a("v-row",[a("v-col",[t._v("選取區塊數："+t._s(t.PCIInfoTotal.total))]),a("v-col",[t._v("面積合計："+t._s(t.PCIInfoTotal.areaTotal))]),a("v-col",[t._v("PCI平均："+t._s(t.PCIInfoTotal.scoreAverage))])],1)],1)],1)],1),a("div",{staticClass:"tool-bar"},[a("v-text-field",{staticClass:"searchBox",attrs:{"prepend-inner-icon":"mdi-menu","append-icon":"mdi-magnify","background-color":"#fff",placeholder:"區域或路名"},on:{change:t.search,"click:append":t.search,"click:prepend-inner":function(e){t.showNavMenu=!0}},model:{value:t.listQuery.searchText,callback:function(e){t.$set(t.listQuery,"searchText",e)},expression:"listQuery.searchText"}}),t.activeLayer.case?a("div",{staticClass:"case-filter"},[t._l(t.caseTypeListFilter,(function(e,i){return a("v-chip",{key:i,attrs:{"text-color":t.listQuery.caseType==i?"blue":"black"},on:{click:function(e){t.listQuery.caseType=i}}},[t._v(t._s(e.name))])})),t.listQuery.caseType?t._e():a("v-chip",{on:{click:function(e){t.listQuery.caseEtc=!t.listQuery.caseEtc}}},[t.listQuery.caseEtc?a("v-icon",{attrs:{color:"blue"}},[t._v("mdi-menu-left")]):a("span",[t._v(" 其他 "),a("v-icon",[t._v("mdi-menu-right")])],1)],1),t.listQuery.caseType?a("span",[a("v-btn-toggle",{attrs:{rounded:"",mandatory:"",dense:""}},t._l(t.caseTypeListFilter[t.listQuery.caseType].list,(function(e,i){return a("v-btn",{key:i,attrs:{small:""}},[t._v(t._s(e))])})),1),a("v-menu",{attrs:{bottom:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-chip",t._g(t._b({},"v-chip",s,!1),i),[-1==t.listQuery.caseLevel?a("span",[t._v("程度")]):a("span",[a("v-icon",{staticClass:"icon-shadow",attrs:{color:t.caseLevel[t.listQuery.caseLevel].color}},[t._v("mdi-map-marker-alert")]),a("span",[t._v(t._s(t.caseLevel[t.listQuery.caseLevel].description))])],1),a("v-icon",{attrs:{right:""}},[t._v("mdi-menu-down")])],1)]}}],null,!1,3024707018)},[a("v-list",{attrs:{dense:"",flat:""}},[a("v-list-item-group",[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-title",{staticClass:"text-center",on:{click:function(e){t.listQuery.caseLevel=-1}}},[t._v("全部")])],1),t._l(t.caseLevel,(function(e,i){return a("v-list-item",{key:i,staticClass:"pr-2 pl-2",attrs:{dense:""},on:{click:function(e){t.listQuery.caseLevel=i}}},[a("v-list-item-icon",{staticClass:"mt-1 mr-1"},[a("v-icon",{staticClass:"icon-shadow",attrs:{color:e.color}},[t._v("mdi-map-marker-alert")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.description))])],1)],1)}))],2)],1)],1),a("v-chip",{attrs:{"text-color":"red"},on:{click:function(e){t.listQuery.caseType=null}}},[t._v("取消")])],1):t._e()],2):t._e()],1),a("v-menu",{attrs:{top:"",rounded:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs,r=e.value;return[a("v-btn",t._g(t._b({staticClass:"btn_district",style:"background-color: "+t.districtList[t.listQuery.distIndex].color+";",attrs:{width:r?160:80,height:"80"}},"v-btn",s,!1),i),[r?a("v-row",t._g(t._b({staticClass:"distTitle",style:"background-color: "+t.districtList[t.listQuery.distIndex].color+";",attrs:{"no-gutters":""}},"v-row",s,!1),i),[a("v-col",{attrs:{cols:"6"}},[a("v-img",{attrs:{src:t.publicPath+"assets/images/"+t.districtList[t.listQuery.distIndex].img_S,width:"100%",height:"100%"}})],1),a("v-col",{staticClass:"description",attrs:{cols:"6"}},[a("div",{staticClass:"zhName"},[t._v(t._s(t.districtList[t.listQuery.distIndex].name))]),a("div",{staticClass:"engName"},[t._v(t._s(t.districtList[t.listQuery.distIndex].engName))])])],1):a("div",[a("v-img",{attrs:{src:t.publicPath+"assets/images/"+t.districtList[t.listQuery.distIndex].img_L,"max-heigh":"80","max-width":"80"}}),a("div",{staticClass:"name"},[t._v(t._s(t.districtList[t.listQuery.distIndex].name))])],1)],1)]}}]),model:{value:t.showDistrictMenu,callback:function(e){t.showDistrictMenu=e},expression:"showDistrictMenu"}},[a("v-card",{staticClass:"overflow-y-hidden",staticStyle:{background:"transparent"}},[a("v-row",{staticClass:"districtMenu",attrs:{"no-gutters":""}},[t._l(t.districtListFilter,(function(e,i){return a("v-col",{key:i,class:["area",{active:t.listQuery.distIndex==i}],attrs:{cols:"3"}},[a("v-btn",{style:"background-color: "+e.color+";",attrs:{width:"80",height:"80"},on:{click:function(e){return t.setDistIndex(i)}}},[a("v-img",{attrs:{src:t.publicPath+"assets/images/"+t.districtList[i].img_L,"max-heigh":"80","max-width":"80"}}),a("div",{staticClass:"name"},[t._v(t._s(e.name))])],1)],1)})),a("v-col",{staticClass:"area other",attrs:{offset:"6",cols:"3"}},[a("v-btn",{attrs:{width:"160",height:"80"}},[a("v-icon",{attrs:{dark:"",size:"40",color:"#BDBDBD"}},[t._v("mdi-layers-off")]),a("div",{staticClass:"name"},[t._v("清除")])],1)],1)],2)],1)],1),a("v-menu",{attrs:{"open-on-hover":"",top:"",rounded:"","offset-x":"",transition:"slide-x-transition",disabled:1==t.showLayerMenu},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({class:["btn_district",{hide:t.showDistrictMenu}],style:"background-color: "+t.districtList[t.listQuery.distIndex].color+";",attrs:{width:"80",height:"80"},on:{click:function(e){e.stopPropagation(),t.showDistrictMenu=!0}}},"v-btn",s,!1),i),[a("v-img",{attrs:{src:t.publicPath+"assets/images/"+t.districtList[t.listQuery.distIndex].img_L,"max-heigh":"80","max-width":"80"}}),a("div",{staticClass:"name"},[t._v(t._s(t.districtList[t.listQuery.distIndex].name))])],1)]}}])},[a("v-card",{staticClass:"pa-2 overflow-y-hidden"},[a("v-row",{attrs:{dense:""}},[t._l(t.layerList,(function(e,i){return a("v-col",{key:i,class:["layerOpt",{active:t.listQuery.layerType==i}],on:{click:function(e){return t.setLayer(i)}}},[a("v-btn",{attrs:{width:"40",height:"40",small:"",plain:""}},[a("v-icon",{attrs:{dark:"",size:"30",color:e.color}},[t._v(t._s(e.icon))])],1),a("div",{staticClass:"name"},[t._v(t._s(e.name))])],1)})),a("v-col",{staticClass:"layerOpt",on:{click:function(e){e.stopPropagation(),t.showLayerMenu=!0}}},[a("v-btn",{attrs:{width:"40",height:"40",small:"",plain:""}},[a("v-icon",{attrs:{dark:"",size:"30",color:"#BDBDBD"}},[t._v("mdi-layers")])],1),a("div",{staticClass:"name"},[t._v("更多")])],1)],2)],1)],1),a("v-dialog",{attrs:{"content-class":"layerMenu","max-width":"300","hide-overlay":""},model:{value:t.showLayerMenu,callback:function(e){t.showLayerMenu=e},expression:"showLayerMenu"}},[a("v-card",[a("v-btn",{attrs:{icon:"",absolute:"",right:""},on:{click:function(e){t.showLayerMenu=!1}}},[a("v-icon",[t._v("mdi-close")])],1),a("v-card-title",[t._v("詳細圖層")]),a("v-card-text",[a("v-row",{attrs:{dense:""}},t._l(t.layerList,(function(e,i){return a("v-col",{key:i,class:["layerOpt",{active:t.listQuery.layerType==i}],on:{click:function(e){return t.setLayer(i)}}},[a("v-btn",{attrs:{width:"55",height:"55",small:"",plain:""}},[a("v-icon",{attrs:{dark:"",size:"40",color:e.color}},[t._v(t._s(e.icon))])],1),a("div",{staticClass:"name"},[t._v(t._s(e.name))])],1)})),1)],1),a("v-divider",{staticStyle:{margin:"0 15px"}}),a("v-card-title",[t._v("地圖類型")]),a("v-card-text",[a("v-row",{attrs:{justify:"center",dense:""}},t._l(t.mapList,(function(e,i){return a("v-col",{key:i,class:["layerOpt",{active:t.listQuery.mapType==i}],on:{click:function(e){return t.setMapType(i)}}},[a("v-btn",{attrs:{width:"55",height:"55",small:"",plain:""}},[a("v-icon",{attrs:{dark:"",size:"40",color:e.color}},[t._v(t._s(e.icon))])],1),a("div",{staticClass:"name"},[t._v(t._s(e.name))])],1)})),1)],1)],1)],1),"PCI"==t.listQuery.layerType&&t.activeLayer.PCILayer?a("div",{staticClass:"PCILevelMenu outside"},[a("div",{staticClass:"title"},[t._v("PCI"),a("br"),t._v("鋪面狀況指數")]),t._l(t.PCILevelOrder,(function(e){return a("v-row",{key:e,class:["level",{active:t.listQuery.PCILevel.includes(e)}],attrs:{"no-gutters":"",align:"center",justify:"center"}},[a("v-col",{staticClass:"colorBlock",style:"background-color: "+t.PCILevel[e].color+";",attrs:{cols:"8"}},[a("div",{staticClass:"description"},[t._v(t._s(t.PCILevel[e].description))]),a("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",s,!1),i),[a("v-icon",{attrs:{small:"",color:"white lighten-1"}},[t._v("mdi-help-circle")])],1)]}}],null,!0)},[a("span",[t._v(t._s(t.PCILevel[e].range))])])],1),a("v-col",{attrs:{cols:"4"}},[a("v-switch",{staticClass:"layer-switch",attrs:{value:e,flat:"","hide-details":"",dense:""},on:{change:function(e){t.activeLayer.PCILayer=!0,t.setPCILayer(),t.setCaseLayer()}},model:{value:t.listQuery.PCILevel,callback:function(e){t.$set(t.listQuery,"PCILevel",e)},expression:"listQuery.PCILevel"}})],1)],1)})),a("br"),t._l(Object.keys(t.areaList),(function(e){return a("v-row",{key:e,class:["level",{active:t.listQuery.PCILevel.includes(Number(e))}],style:"background-color: "+t.areaList[e].color+";",attrs:{"no-gutters":"",align:"center",justify:"center"},on:{click:function(a){t.setPCILayer(Number(e)),t.setCaseLayer()}}},[a("v-col",{attrs:{cols:"3"}},[a("v-icon",{attrs:{dark:""}},[t._v(t._s(t.areaList[e].icon))])],1),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"7"}},[a("div",{staticClass:"description"},[t._v(t._s(t.areaList[e].description))])])],1)}))],2):t._e(),a("v-navigation-drawer",{attrs:{app:"",absolute:"",temporary:""},model:{value:t.showNavMenu,callback:function(e){t.showNavMenu=e},expression:"showNavMenu"}},[a("template",{slot:"prepend"},[a("v-row",{staticClass:"distTitle",style:"background-color: "+t.districtList[t.listQuery.distIndex].color+";",attrs:{"no-gutters":""}},[a("v-col",[a("v-img",{attrs:{src:t.publicPath+"assets/images/"+t.districtList[t.listQuery.distIndex].img_S,width:"100%",height:"100%"}})],1),a("v-col",{staticClass:"description"},[a("div",{staticClass:"name"},[t._v(t._s(t.districtList[t.listQuery.distIndex].name))]),a("div",{staticClass:"engName"},[t._v(t._s(t.districtList[t.listQuery.distIndex].engName))])])],1),a("v-btn",{staticClass:"closeNavMenu",attrs:{icon:"",color:"#eee",absolute:"",right:""},on:{click:function(e){t.showNavMenu=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1)],2),a("div",{staticClass:"info-panel"},[a("v-card",{staticClass:"PCILevel",attrs:{elevation:"2",height:"35",width:"350"}},[a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"3"}},[a("span",{staticClass:"text-subtitle-2"},[t._v(t._s(t.layerList[t.listQuery.layerType].name))])]),a("v-col",{attrs:{cols:"7"}},[a("span",{staticClass:"caption"},[t._v("顯示"+t._s(t.layerList[t.listQuery.layerType].description))])]),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"2"}},["PCI"==t.listQuery.layerType?a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},model:{value:t.activeLayer.PCILayer,callback:function(e){t.$set(t.activeLayer,"PCILayer",e)},expression:"activeLayer.PCILayer"}}):t._e(),"panorama"==t.listQuery.layerType?a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},on:{change:function(e){return t.setPanoramaLayer()}},model:{value:t.activeLayer.panoramaLayer,callback:function(e){t.$set(t.activeLayer,"panoramaLayer",e)},expression:"activeLayer.panoramaLayer"}}):t._e()],1)],1)],1),t.activeLayer.PCILayer?a("v-card",{staticClass:"PCIhist",attrs:{elevation:"2",height:"110",width:"350"}},[a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"3"}},[a("span",{class:["text-subtitle-2",{"grey--text text--lighten-1":!t.activeLayer.PCI}]},[t._v("鋪面指標")])]),a("v-col",{staticClass:"level-block",attrs:{cols:"7","align-self":"center"}},[a("v-row",{attrs:{align:"center",justify:"center",dense:""}},[a("v-col",{staticClass:"grey--text text--darken-2",attrs:{cols:"2"}},[t._v("很好")]),t._l(t.PCILevelOrder,(function(e){return a("v-col",{key:e,staticClass:"level-color",style:"background-color: "+t.PCILevel[e].color})})),a("v-col",{staticClass:"grey--text text--darken-2",attrs:{cols:"3"}},[t._v("不合格")])],2)],1),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"2"}},[a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},on:{change:function(e){t.setPCILayer(),t.setCaseLayer()}},model:{value:t.activeLayer.PCI,callback:function(e){t.$set(t.activeLayer,"PCI",e)},expression:"activeLayer.PCI"}})],1)],1),a("v-divider"),a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"3"}},[a("span",{class:["text-subtitle-2",{"grey--text text--lighten-1":!t.activeLayer.case}]},[t._v("顯示案件")])]),a("v-col",{staticClass:"case-block",attrs:{cols:"7","align-self":"center"}},[a("v-row",{attrs:{align:"center",justify:"center",dense:""}},t._l(t.caseLevelOrder,(function(e){return a("v-col",{key:e,staticClass:"leave-text"},[a("v-icon",{staticClass:"icon-shadow",attrs:{color:t.caseLevel[e].color}},[t._v("mdi-map-marker-alert")]),a("span",{staticClass:"grey--text text--darken-2"},[t._v(t._s(t.caseLevel[e].description))])],1)})),1)],1),a("v-divider",{attrs:{vertical:""}}),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"2"}},[a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},on:{change:function(e){t.setPCILayer(),t.setCaseLayer()}},model:{value:t.activeLayer.case,callback:function(e){t.$set(t.activeLayer,"case",e)},expression:"activeLayer.case"}})],1)],1),a("v-divider"),a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"3"}},[a("v-select",{staticClass:"year-select",attrs:{items:t.timeSelectList.year,dense:"",solo:"",flat:"","hide-selected":"",disabled:1==t.timeSelectList.year.length},on:{input:function(e){t.setPCILayer(),t.setCaseLayer()}},model:{value:t.listQuery.year,callback:function(e){t.$set(t.listQuery,"year",e)},expression:"listQuery.year"}})],1),a("v-divider",{staticStyle:{"z-index":"1"},attrs:{vertical:""}}),a("v-col",{staticClass:"month-block",attrs:{cols:"9","align-self":"center"}},[a("v-slider",{attrs:{label:"月","tick-labels":t.timeSelectList.month,min:1,max:12,step:"1",ticks:"always","track-color":"#BDBDBD","inverse-label":"",dense:"","hide-details":""},on:{change:function(e){t.setPCILayer(),t.setCaseLayer()}},model:{value:t.listQuery.month,callback:function(e){t.$set(t.listQuery,"month",e)},expression:"listQuery.month"}})],1)],1)],1):t._e()],1),a("v-menu",{attrs:{bottom:"","min-width":"200px",rounded:"","offset-y":"",disabled:!t.isLogin},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-btn",t._g({staticClass:"btn-avatar",attrs:{absolute:"",icon:"",large:"",right:"",dark:""},on:{click:function(e){t.isLogin||(t.showLoginDialog=!0)}}},i),[a("v-avatar",{attrs:{color:"#4DB6AC"}},[t.isLogin?a("span",{staticClass:"white--text text-h5"},[t._v(t._s(t.loginInfo.username[0].toUpperCase()))]):a("v-icon",{attrs:{dark:""}},[t._v("mdi-account-circle")])],1)],1)]}}])},[a("v-card",{staticClass:"mt-2"},[a("v-list-item-content",{staticClass:"justify-center"},[a("div",{staticClass:"mx-auto text-center"},[t.isLogin?[a("v-avatar",{staticClass:"my-2",attrs:{color:"#4DB6AC"}},[a("span",{staticClass:"white--text text-h5"},[t._v(t._s(t.loginInfo.username[0].toUpperCase()))])]),a("h3",[t._v(t._s(t.loginInfo.username))]),a("v-divider",{staticClass:"my-3"}),a("v-btn",{attrs:{depressed:"",rounded:"",text:""},on:{click:function(e){t.isLogin=!1,t.$refs.loginForm.reset()}}},[t._v("Logout")])]:t._e()],2)])],1)],1),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.showLoginDialog,callback:function(e){t.showLoginDialog=e},expression:"showLoginDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[t._v("Login")]),a("v-card-text",[a("v-form",{ref:"loginForm"},[a("v-text-field",{attrs:{label:"帳號",rules:t.rules,"hide-details":"auto"},model:{value:t.loginInfo.username,callback:function(e){t.$set(t.loginInfo,"username",e)},expression:"loginInfo.username"}}),a("v-text-field",{attrs:{label:"密碼",type:"password",rules:t.rules,"hide-details":"auto"},model:{value:t.loginInfo.password,callback:function(e){t.$set(t.loginInfo,"password",e)},expression:"loginInfo.password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.showLoginDialog=!1,t.$refs.loginForm.reset()}}},[t._v("取消")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.showLoginDialog=!1,t.isLogin=!0}}},[t._v("確定")])],1)],1)],1),a("transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showPanorama,expression:"showPanorama"}],attrs:{id:"panorama"}})]),a("v-fade-transition",[t.showPanorama?a("v-btn",{staticClass:"btn_panorama",attrs:{width:"80",height:"80",color:"#FFCCBC"},on:{click:function(e){return t.showPanoramaLayer()}}},[a("v-icon",{attrs:{dark:"",size:"40",color:"#1B512D"}},[t._v("mdi-map")]),a("div",{staticClass:"name"},[t._v("返回地圖")])],1):t._e()],1)],1)},r=[],n=a(4367),o=a(7906),l=a(6198),c=a(5200),p=a(8932),v=a(2032),d=(a(9554),a(1539),a(4747),a(2222),a(3112),a(7941),a(4916),a(5306),a(8559),a(7327),a(9720),a(5827),a(9653),a(6977),a(8783),a(3948),a(285),a(1637),a(1249),a(8309),a(3123),a(5212),a(2772),a(6699),a(2479),a(5735),a(3753),a(561),a(3311)),u="/testPage/",h="https://lancelin0410.github.io/testPage/",y={202107:7,202108:29,202109:15,202110:4,202111:26,202112:29,202201:30,202202:28,202203:31,202204:20,202205:23},m={version:"weekly",language:"zh-TW",region:"TW",libraries:["places"]},f=new d.aN(m);const g={name:"MainPage",data:function(){return{configName:"demo",publicPath:u,isLogin:!1,showLoginDialog:!1,showNavMenu:!1,showDistrictMenu:!1,showPanorama:!1,showLayerMenu:!1,map:null,placeServer:null,kmlLayer:{PCILayer:{},caseLayer:{}},markers:{},panorama:null,prevSceneId:[],polyLine:{},listQuery:{mapType:"roadmap",layerType:"PCI",PCILevel:[],caseType:null,caseLevel:-1,caseEtc:!1,distIndex:0,searchText:"台北市",year:2022,month:5},activeLayer:{PCILayer:!0,PCI:!0,case:!1,panoramaLayer:!1},rules:[function(t){return!!t||"請輸入"}],loginInfo:{username:"",password:""},timeSelectList:{year:[2022],month:[1,2,3,4,5,6,7,8,9,10,11,12]},mapList:{roadmap:{name:"地圖",icon:"mdi-map",color:"#2F4858"},hybrid:{name:"衛星",icon:"mdi-satellite",color:"#EDBBB4"}},layerList:{PCI:{type:"PCI",assetsUrl:"",name:"鋪面",description:"鋪面狀況",icon:"mdi-road-variant",color:"#AA9FB1"}},caseTypeList:{D40:{name:"坑洞"},D20:{name:"龜裂"},"D21,D41":{name:"人孔",list:{D21:"人孔破損",D41:"人孔高差"}},"D00,D01,D10,D11":{name:"裂縫",list:{D00:"輪痕(縱向)",D01:"施工接合(縱向)",D10:"間隔(橫向)",D11:"施工接合(橫向)"}},etc:{name:"其他",list:{D30:{name:"車轍"},D31:{name:"路面隆起"},D42:{name:"薄層剝離"}}}},caseLevel:{2:{description:"輕度",color:"#FCFF6C"},1:{description:"中度",color:"#83781B"},0:{description:"重度",color:"#A31621"}},caseLevelOrder:[2,1,0],PCILevel:{6:{description:"很好",range:"85~100",color:"#00B900"},5:{description:"好",range:"70~85",color:"#C1FE00"},4:{description:"尚可",range:"55~70",color:"#FEFE00"},3:{description:"差",range:"40~55",color:"#F40088"},2:{description:"很差",range:"25~40",color:"#F40000"},1:{description:"嚴重",range:"10~25",color:"#A72126"},0:{description:"不合格",range:"0~10",color:"#666666"}},PCILevelOrder:[6,5,4,3,2,1,0],areaList:{7:{description:"變差區域",icon:"mdi-alert",color:"#E91E63"},8:{description:"變好區域",icon:"mdi-thumb-up",color:"#009688"}},districtList:{0:{name:"台北市",engName:"Taipei City",color:"#e2a1ff",img_L:"dist-ll-00.png",img_S:"dist-rs-00.png",position:{lat:25.0374865,lng:121.5647688}}},panoramaList:{},PCIInfoHeaders:[{text:"序號",align:"center",value:"id",width:"10%"},{text:"編號",align:"center",value:"num",width:"20%"},{text:"區塊路名",align:"center",value:"block",width:"20%"},{text:"位置",align:"center",value:"place",width:"20%"},{text:"面積",align:"center",value:"area",width:"10%"},{text:"PCI",align:"center",value:"score",width:"10%"},{text:"操作",align:"center",sortable:!1,value:"actions",width:"10%"}],PCIInfoList:[],markerList_test:{},panoramaList_test:{}}},computed:{streetViewList:function(){var t=this;if(!this.panoramaList.hasOwnProperty(this.listQuery.distIndex))return{};var e,a=this.panoramaList[this.listQuery.distIndex],i=this.layerList.panorama.assetsUrl,s=this.layerList.panorama.sceneSetting,r={},n=(0,v.Z)(a);try{var o=function(){var a=e.value;a.forEach((function(e,n){r[e.fileName]={type:"equirectangular",panorama:"".concat(i,"/").concat(t.listQuery.distIndex,"/").concat(e.fileName,".jpg"),hfov:s.hfov,yaw:s.yaw,horizonRoll:s.horizonRoll,compass:!0,northOffset:e.azimuth,autoLoad:!0};var o=[];n>=0&&n<a.length-1&&o.push({pitch:s.pitch,yaw:s.yaw,type:"scene",text:a[n+1].fileName,sceneId:a[n+1].fileName}),n>0&&n<a.length&&o.push({pitch:s.pitch,yaw:s.yaw+180,type:"scene",text:a[n-1].fileName,sceneId:a[n-1].fileName,targetYaw:s.yaw+180}),r[e.fileName]["hotSpots"]=o}))};for(n.s();!(e=n.n()).done;)o()}catch(l){n.e(l)}finally{n.f()}return r},PCIKMLUrl:function(){for(var t=this.layerList.PCI.assetsUrl,e=this.listQuery.year+String(this.listQuery.month).padStart(2,"0"),a={},i=0,s=[].concat((0,p.Z)(Object.keys(this.PCILevel)),(0,p.Z)(Object.keys(this.areaList)));i<s.length;i++){var r=s[i];"demo"==this.configName?a[r]="".concat(t,"/kml/PCI/").concat(e,"/3_1_").concat(this.listQuery.distIndex,"_P").concat(r,"_").concat(y[e],".KML"):"freeway"==this.configName&&(a[r]=t.replace("${level}",r))}return a},caseKMLUrl:function(){for(var t=this.layerList.PCI.assetsUrl,e=this.listQuery.year+String(this.listQuery.month).padStart(2,"0"),a={},i=0,s=[].concat((0,p.Z)(Object.keys(this.PCILevel)),(0,p.Z)(Object.keys(this.areaList)));i<s.length;i++){var r=s[i];"demo"==this.configName?a[r]="".concat(t,"/kml/PCI/").concat(e,"/3_1_").concat(this.listQuery.distIndex,"_1pointP_").concat(r,"_").concat(y[e],".KML"):"freeway"==this.configName&&(a[r]=t.replace("${level}","Case"))}return a},districtListFilter:function(){var t=this;return Object.fromEntries(Object.entries(this.districtList).filter((function(e){var a=(0,c.Z)(e,2),i=a[0];a[1];return i!=t.listQuery.distIndex})))},caseTypeListFilter:function(){var t=this,e=Object.fromEntries(Object.entries(this.caseTypeList).filter((function(t){var e=(0,c.Z)(t,2),a=e[0];e[1];return"etc"!=a})));return this.listQuery.caseEtc&&Object.assign(e,this.caseTypeList.etc.list),this.listQuery.caseType&&(e=Object.fromEntries(Object.entries(e).filter((function(e){var a=(0,c.Z)(e,2),i=a[0];a[1];return i==t.listQuery.caseType})))),e},PCIInfoTotal:function(){var t=0|this.PCIInfoList.length,e=this.PCIInfoList.reduce((function(t,e){return t+Number(e.area)}),0),a=this.PCIInfoList.reduce((function(t,e){return t+Number(e.score)}),0)/t;return{total:t,areaTotal:e,scoreAverage:a.toFixed(2)}}},created:function(){var t=this,e=new URL(window.location.href);this.configName=e.searchParams.get("config")||"demo",fetch("".concat(this.publicPath,"assets/config/").concat(this.configName,".json")).then(function(){var e=(0,l.Z)((0,o.Z)().mark((function e(a){var i,s,r,n,c,p,v;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:for(n in i=e.sent,s=i.layerList,r=i.districtList,t.districtList=r,t.listQuery.distIndex=Object.keys(t.districtList)[0],t.layerList=s,t.layerList)t.kmlLayer.hasOwnProperty("".concat(n,"Layer"))||t.$set(t.kmlLayer,"".concat(n,"Layer"),null),t.activeLayer.hasOwnProperty("".concat(n,"Layer"))||t.$set(t.activeLayer,"".concat(n,"Layer"),!1),t.layerList[n].assetsUrl=t.layerList[n].assetsUrl.replace("${WebUrl}",h);for(v in c=s.panorama.streetViewJSON,p=function(e){fetch(c[e]).then(function(){var a=(0,l.Z)((0,o.Z)().mark((function a(i){var s;return(0,o.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,i.json();case 2:s=a.sent,t.panoramaList[e]=s.data;case 4:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}())},c)p(v);f.load().then((function(){return t.initMap()}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())["catch"]((function(t){window.location.href=e.origin+e.pathname}))},mounted:function(){var t=this;for(var e in this.listQuery.PCILevel=this.PCILevelOrder,this.panorama=pannellum.viewer("panorama",{scenes:{}}),this.panoramaList_test)this.panorama.addScene(e,this.panoramaList_test[e]);this.panorama.on("load",(function(){t.panorama.resize()})),this.$el.querySelector(".pnlm-compass").addEventListener("click",(function(){var e=t.panorama.getNorthOffset();t.panorama.setYaw(-e)}))},watch:{"activeLayer.PCILayer":function(t){t?(this.activeLayer.PCI=!0,this.activeLayer["case"]=!1,0==this.listQuery.PCILevel.length&&(this.listQuery.PCILevel=this.PCILevelOrder)):(this.activeLayer.PCI=this.activeLayer["case"]=!1,this.listQuery.PCILevel=[]),this.setPCILayer(),this.setCaseLayer()}},methods:{initMap:function(){var t=this,e=this.districtList[this.listQuery.distIndex].position;if(this.map=new google.maps.Map(this.$refs.map,{center:e,zoom:13,maxZoom:19,fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1,styles:[{stylers:[{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}]}),m.hasOwnProperty("apiKey")){var a=new google.maps.StyledMapType([{stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"}]}],{name:"Labels"});this.map.overlayMapTypes.push(a)}this.placeServer=new google.maps.places.PlacesService(this.map);for(var i=0,s=[].concat((0,p.Z)(Object.keys(this.PCILevel)),(0,p.Z)(Object.keys(this.areaList)));i<s.length;i++){var r=s[i];this.kmlLayer.PCILayer[r]=new google.maps.KmlLayer({url:this.PCIKMLUrl[r],map:this.map,suppressInfoWindows:!0,preserveViewport:!0}),this.kmlLayer.PCILayer[r].addListener("click",(function(e){var a=e.featureData.name,i=a.split(/ID\uFF1A(\d*)\uFF0C\u5340\u584A\u7DE8\u865F\uFF1A(\d+)\uFF0C\u5730\u9EDE\uFF1A([\s\S]*)\uFF0C\u9762\u7A4D\uFF1A(\d*)\u33A1\uFF0C\u9053\u8DEF\u7DE8\u865F\uFF1A([\s\S]*)\uFF0CPCI\u7D71\u8A08\u65E5\u671F\uFF1A[\s\S]*?\uFF0CPCI\u5206\u6578\uFF1A(\d*)/).filter((function(t){return 0!=t.length})),s=t.PCIInfoList.some((function(t){return t.id==i[0]}));s||t.PCIInfoList.push({id:i[0],num:i[1],block:i[2],place:i[4],area:i[3],score:i[5]})}))}for(var n=0,o=[].concat((0,p.Z)(Object.keys(this.PCILevel)),(0,p.Z)(Object.keys(this.areaList)));n<o.length;n++){var l=o[n];this.kmlLayer.caseLayer[l]=new google.maps.KmlLayer({map:this.map,preserveViewport:!0})}for(var c in this.kmlLayer)"PCILayer"!=c&&"caseLayer"!=c&&(this.kmlLayer[c]=new google.maps.KmlLayer({map:this.map,preserveViewport:!0}));var v=function(e){t.markers[e]=new google.maps.Marker({title:e,position:t.markerList_test[e]}),t.markers[e].addListener("click",(function(a){var i=t.markers[e].getTitle();console.log(i),t.showPanoramaLayer(i)}))};for(var d in this.markerList_test)v(d)},setMapType:function(t){this.map.setMapTypeId(t),this.listQuery.mapType=t},search:function(){for(var t in 0==this.listQuery.searchText.length&&(this.listQuery.searchText=this.districtList[0].name),this.districtList)this.listQuery.distIndex!=t&&-1!=this.districtList[t].name.indexOf(this.listQuery.searchText)&&this.setDistIndex(t)},setLayer:function(t){for(var e in this.showLayerMenu=!1,this.clearAllLayer(),this.activeLayer)this.activeLayer[e]=!1;this.activeLayer["".concat(t,"Layer")]=!0;var a=this.layerList[t].type;switch(a){case"PCI":this.setPCILayer();break;case"panorama":this.PCIInfoList=[],this.setPanoramaLayer();break;case"default":this.setDefaultLayer(t);break}},setDistIndex:function(t){this.showDistrictMenu=!1,this.clearAllLayer(),void 0!=t&&(this.listQuery.distIndex=Number(t)),this.listQuery.searchText=this.districtList[this.listQuery.distIndex].name;var e=this.districtList[this.listQuery.distIndex].position;this.map.setCenter(e),this.setPCILayer(),this.setCaseLayer(),this.setPanoramaLayer()},setPCILayer:function(t){for(var e=0,a=Object.entries(this.kmlLayer.PCILayer);e<a.length;e++){var i=(0,c.Z)(a[e],2),s=(i[0],i[1]);s.setMap(null)}if(this.activeLayer.PCI){-2==t&&(this.listQuery.PCILevel=this.PCILevelOrder),t>=-1&&(this.listQuery.PCILevel=[]),t>-1&&(this.listQuery.PCILevel=[t]);var r=this.listQuery.PCILevel.filter((function(t){return![7,8].includes(t)}));r.length>0&&(this.listQuery.PCILevel=r);var n,o=(0,v.Z)(this.listQuery.PCILevel);try{for(o.s();!(n=o.n()).done;){var l=n.value;console.log(this.PCIKMLUrl[l]),this.kmlLayer.PCILayer[l].setUrl(this.PCIKMLUrl[l]),null==this.kmlLayer.PCILayer[l].getMap()&&this.kmlLayer.PCILayer[l].setMap(this.map)}}catch(p){o.e(p)}finally{o.f()}this.listQuery.layerType="PCI"}},setCaseLayer:function(){for(var t=0,e=Object.entries(this.kmlLayer.caseLayer);t<e.length;t++){var a=(0,c.Z)(e[t],2),i=(a[0],a[1]);i.setMap(null)}if(this.activeLayer["case"]){var s,r=(0,v.Z)(this.listQuery.PCILevel);try{for(r.s();!(s=r.n()).done;){var n=s.value;console.log(this.caseKMLUrl[n]),this.kmlLayer.caseLayer[n].setUrl(this.caseKMLUrl[n]),null==this.kmlLayer.caseLayer[n].getMap()&&this.kmlLayer.caseLayer[n].setMap(this.map)}}catch(o){r.e(o)}finally{r.f()}}},setDefaultLayer:function(t){this.kmlLayer["".concat(t,"Layer")].setMap(null),this.activeLayer["".concat(t,"Layer")]&&(this.kmlLayer["".concat(t,"Layer")].setUrl(this.layerList[t].assetsUrl),null==this.kmlLayer["".concat(t,"Layer")].getMap()&&this.kmlLayer["".concat(t,"Layer")].setMap(this.map),this.listQuery.layerType=t)},setPanoramaLayer:function(){for(var t=0,e=Object.values(this.polyLine);t<e.length;t++)for(var a=e[t],i=0,s=Object.values(a);i<s.length;i++){var r=s[i];r.setMap(null)}for(var n=0,o=Object.values(this.markers);n<o.length;n++){var l=o[n];l.setMap(null)}if(this.activeLayer.panoramaLayer){this.createPolyLine();for(var c=0,p=Object.values(this.markers);c<p.length;c++){var v=p[c];v.setMap(this.map)}this.listQuery.layerType="panorama"}},createPolyLine:function(){var t=this;this.polyLine[this.listQuery.distIndex]=[];var e=this.panoramaList[this.listQuery.distIndex];if(e){var a,i=(0,v.Z)(this.prevSceneId);try{for(i.s();!(a=i.n()).done;){var s=a.value;this.panorama.removeScene(s)}}catch(p){i.e(p)}finally{i.f()}for(var r in this.prevSceneId=[],this.streetViewList)this.panorama.addScene(r,this.streetViewList[r]),this.prevSceneId.push(r);if(this.polyLine[this.listQuery.distIndex].length>0){var o,l=(0,v.Z)(this.polyLine[this.listQuery.distIndex]);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.setMap(this.map)}}catch(p){l.e(p)}finally{l.f()}}else e.forEach((function(e,a){t.polyLine[t.listQuery.distIndex].push(new google.maps.Polyline({path:e.map((function(t){return t.position})),geodesic:!0,strokeColor:"#2196F3",strokeOpacity:1,strokeWeight:3,map:t.map})),t.polyLine[t.listQuery.distIndex][a].addListener("click",(function(e){var i=e.latLng.toJSON(),s=t.panoramaList[t.listQuery.distIndex][a].map((function(t){return(0,n.Z)((0,n.Z)({},t.position),{},{sceneId:t.fileName})})),r=s.reduce((function(t,e){var a=Math.sqrt(Math.pow(i.lat-e.lat,2)+Math.pow(i.lng-e.lng,2));return t.dist>a&&(t.dist=a,t.sceneId=e.sceneId),t}),{dist:1/0,sceneId:""});t.showPanoramaLayer(r.sceneId)}))}))}},showPanoramaLayer:function(t){if(this.showPanorama)return this.showPanorama=!1,this.activeLayer.PCILayer=!1,void(this.activeLayer.panoramaLayer=!0);console.log(t),this.panorama.loadScene(t),this.showPanorama=!0},clearAllLayer:function(){for(var t=0,e=Object.entries(this.kmlLayer.PCILayer);t<e.length;t++){var a=(0,c.Z)(e[t],2),i=(a[0],a[1]);i.setMap(null)}for(var s=0,r=Object.entries(this.kmlLayer.caseLayer);s<r.length;s++){var n=(0,c.Z)(r[s],2),o=(n[0],n[1]);o.setMap(null)}for(var l=0,p=Object.entries(this.kmlLayer);l<p.length;l++){var v=(0,c.Z)(p[l],2),d=v[0],u=v[1];"PCILayer"!=d&&"caseLayer"!=d&&u.setMap(null)}for(var h=0,y=Object.values(this.polyLine);h<y.length;h++)for(var m=y[h],f=0,g=Object.values(m);f<g.length;f++){var L=g[f];L.setMap(null)}for(var b=0,C=Object.values(this.markers);b<C.length;b++){var _=C[b];_.setMap(null)}},delPCIInfo:function(t){var e=this.PCIInfoList.indexOf(t);this.PCIInfoList.splice(e,1)}}},L=g;a(5940);var b=a(1001),C=a(3453),_=a.n(C),x=a(3167),I=a(1578),w=a(8704),P=a(4686),k=a(2371),Q=a(7118),M=a(8675),T=a(2102),O=a(2166),Z=a(8366),D=a(8331),F=a(3493),j=a(6232),S=a(4926),N=a(9839),V=a(3920),z=a(8681),B=a(7996),E=a(2866),A=a(459),$=a(1217),U=a(6797),K=a(2877),W=a(2018),q=a(1067),H=a(9762),J=a(3180),R=a(8687),Y=a(6767),X=(0,b.Z)(L,s,r,!1,null,null,null);const G=X.exports;_()(X,{VApp:x.Z,VAvatar:I.Z,VBtn:w.Z,VBtnToggle:P.Z,VCard:k.Z,VCardActions:Q.h7,VCardSubtitle:Q.Qq,VCardText:Q.ZB,VCardTitle:Q.EB,VChip:M.Z,VCol:T.Z,VDataTable:O.Z,VDialog:Z.Z,VDivider:D.Z,VFadeTransition:F.Z5,VForm:j.Z,VIcon:S.Z,VImg:N.Z,VList:V.Z,VListItem:z.Z,VListItemContent:B.km,VListItemGroup:E.Z,VListItemIcon:A.Z,VListItemTitle:B.V9,VMenu:$.Z,VNavigationDrawer:U.Z,VRow:K.Z,VSelect:W.Z,VSlider:q.Z,VSpacer:H.Z,VSwitch:J.Z,VTextField:R.Z,VTooltip:Y.Z});var tt=a(8813);i.Z.use(tt.Z);const et=new tt.Z({});i.Z.config.productionTip=!1,new i.Z({vuetify:et,render:function(t){return t(G)}}).$mount("#app")},5940:(t,e,a)=>{var i=a(7663);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var s=a(4402).Z;s("803d642c",i,!0,{sourceMap:!1,shadowMode:!1})}},e={};function a(i){var s=e[i];if(void 0!==s)return s.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,a),r.exports}a.m=t,(()=>{var t=[];a.O=(e,i,s,r)=>{if(!i){var n=1/0;for(p=0;p<t.length;p++){for(var[i,s,r]=t[p],o=!0,l=0;l<i.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every((t=>a.O[t](i[l])))?i.splice(l--,1):(o=!1,r<n&&(n=r));if(o){t.splice(p--,1);var c=s();void 0!==c&&(e=c)}}return e}r=r||0;for(var p=t.length;p>0&&t[p-1][2]>r;p--)t[p]=t[p-1];t[p]=[i,s,r]}})(),(()=>{a.n=t=>{var e=t&&t.__esModule?()=>t["default"]:()=>t;return a.d(e,{a:e}),e}})(),(()=>{a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()})(),(()=>{a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e)})(),(()=>{a.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}})(),(()=>{var t={143:0};a.O.j=e=>0===t[e];var e=(e,i)=>{var s,r,[n,o,l]=i,c=0;if(n.some((e=>0!==t[e]))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)var p=l(a)}for(e&&e(i);c<n.length;c++)r=n[c],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(p)},i=self["webpackChunkmap_test"]=self["webpackChunkmap_test"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var i=a.O(void 0,[998],(()=>a(1110)));i=a.O(i)})();
//# sourceMappingURL=app.a8a6cd29.js.map