(()=>{var e={7663:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(8081),i=a.n(s),r=a(3645),n=a.n(r),o=n()(i());o.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap);"]),o.push([e.id,"body,html{font-family:Noto Sans TC,微軟正黑體,Microsoft JhengHei,sans-serif;height:100vh;padding:0;margin:0}#app,body,html{position:relative}#app .v-enter-active,#app .v-leave-active{transition:opacity .5s}#app .v-enter-from,#app .v-leave-to{opacity:0}#app .v-enter-to,#app .v-leave-from{opacity:1}#app img{display:block;max-width:100%;max-height:100%}#app .icon-shadow{filter:drop-shadow(0 0 2px rgba(189,189,189,.6))}#app [class*=-switch] .v-input--selection-controls__input{margin:0 auto}#app #map{overflow:hidden;background:none!important;position:absolute;height:100vh;width:100vw}#app #map [role=region]>div:first-child>div:first-child{z-index:150!important}#app #map iframe{height:100vh;width:100vw}#app #map .gm-style-iw.gm-style-iw-c table,#app #map .gm-style-iw.gm-style-iw-c td,#app #map .gm-style-iw.gm-style-iw-c tr{font-family:Noto Sans TC,微軟正黑體,Microsoft JhengHei,sans-serif;border-collapse:collapse!important;border:none!important;padding:5px}#app .PCIInfo{position:absolute;top:50px;right:50px}#app .tool-bar{position:absolute;top:0;left:10px;display:inline-flex}#app .tool-bar .searchBox{font-size:130%}#app .tool-bar .searchBox .v-icon{cursor:pointer}#app .tool-bar .searchBox .v-icon.mdi-magnify{color:#999}#app .tool-bar .searchBox .v-input__slot{padding:4px 8px;border-radius:2px;width:400px;max-width:75vw}#app .tool-bar .searchBox .v-input__slot .v-text-field__slot{padding:0 4px}#app .tool-bar .case-filter{padding:18px 0 0 18px}#app .tool-bar .case-filter .v-chip,#app .tool-bar .case-filter .v-item-group{margin-left:5px}#app .layerMenu{position:absolute;left:10px;bottom:10px}#app .PCILevelMenu.outside{position:absolute;top:45%;transform:translateY(-50%);width:176px;left:20px;filter:drop-shadow(1px,1px,5px,rgba(221,221,221,.5));flex-direction:column}#app .PCILevelMenu .btn,#app .PCILevelMenu .title{text-align:center;line-height:120%;background-color:#4c5f6b;color:#fff;font-size:150%;padding:15px 2px}#app .PCILevelMenu .btn_func>*{cursor:pointer;text-align:center;font-size:16px}#app .PCILevelMenu .btn_func>:hover{filter:grayscale(0)}#app .PCILevelMenu .btn_func .btn.clear{background-color:#00a9a6;filter:grayscale(.3)}#app .PCILevelMenu .btn_func .btn.all{background-color:#4e8099;filter:brightness(.7)}#app .PCILevelMenu .btn_func .btn.all.active{border:1px dashed #2f4f4f;filter:brightness(1)}#app .PCILevelMenu .level{cursor:pointer;box-shadow:inset 0 -1px 2px #ddd;background-color:#fff;filter:brightness(.7);transition:.5s}#app .PCILevelMenu .level:hover{filter:brightness(.8)}#app .PCILevelMenu .level.active{filter:brightness(1)}#app .PCILevelMenu .level .colorBlock{display:flex;justify-content:space-between;padding:0 5px}#app .PCILevelMenu .level .description{text-align:center;padding:10px 2px}#app .PCILevelMenu .level .layer-switch{transform:scale(.8);margin:auto}#app .v-navigation-drawer .distTitle{padding:8px 0 0 0;cursor:pointer}#app .v-navigation-drawer .distTitle .description{text-align:center;padding:20px 5px 15px 5px;color:#fff}#app .v-navigation-drawer .distTitle .description .name{font-size:180%}#app .v-navigation-drawer .distTitle .description .engName{font-size:120%}#app .v-navigation-drawer .closeNavMenu{top:0;right:0}#app .info-panel{position:absolute;bottom:40px;left:50%;transform:translateX(-50%)}#app .info-panel>*{font-size:12px}#app .info-panel .PCILevel{padding:5px;margin-bottom:4px}#app .info-panel .PCIhist{padding:5px}#app .info-panel .PCIhist .year-select{font-size:14px;height:40px;text-align:center}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot{padding:0 6px;margin:auto}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-select__selections{flex:none}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-select__selections input[id^=input-]{display:none}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-input__append-inner{margin-left:0}#app .info-panel .PCIhist .year-select .v-input__slot .v-select__slot .v-input__append-inner i.v-icon.mdi-menu-down{font-size:18px}#app .info-panel .month-block .v-slider__ticks-container .v-slider__tick{font-size:12px}#app .info-panel .month-block .v-slider__ticks-container .v-slider__tick:last-child .v-slider__tick-label{transform:translateX(-50%)}#app .info-panel .month-block .v-label{margin:0 2px;font-size:12px}#app .info-panel .level-block{padding:0 5px;height:100%;display:flex}#app .info-panel .level-block .level-color{height:8px;padding:0}#app .info-panel .PCIType-switch{margin:0 auto;transform:scale(.8)}#app .info-panel .PCIType-switch .v-input__control{justify-content:center;align-items:center}#app .btn-avatar{margin:10px 0}#app .btn-target{padding:0;background-color:#fff;min-width:40px;width:40px;height:40px;bottom:120px;right:10px}#app .btn_district,#app .btn_layers,#app .btn_panorama{position:absolute;bottom:40px;left:40px;height:80px;background-color:#fff;z-index:5;background-color:#e1f5fe;overflow:hidden}#app .btn_panorama{right:80px}#app .btn_district,#app .btn_district .v-image__image,#app .btn_district>*{transition:.5s,opacity 0s .2s,background-position .2s ease-out}#app .btn_district.hide{opacity:0}#app .btn_district.hide .v-image__image{background-size:158% 158%!important;background-position:48% top!important}#app .btn_district.hide .name{display:none}#app .btn_district .name{position:absolute;bottom:0;text-align:center;width:100%;color:#fff;font-size:120%}#app .btn_district .description{margin:auto;color:#fff}#app .btn_district .description .zhName{text-align:center;font-size:18px}#app .btn_district .description .engName{text-align:center;font-size:12px;letter-spacing:0}#app .btn_layers,#app .btn_panorama{padding:5px}#app .btn_layers .v-btn__content,#app .btn_panorama .v-btn__content{display:flex;flex-direction:column}#app .btn_layers .name,#app .btn_panorama .name{white-space:pre-wrap;text-align:center;font-size:14px}#app .layerOpt{cursor:pointer;display:flex;flex-direction:column;align-items:center;transition:.5s}#app .layerOpt .v-btn{background-color:#eee;padding:0}#app .layerOpt .v-btn .v-btn__content{height:40px;width:40px}#app .layerOpt .name{white-space:pre-wrap;text-align:center;font-size:75%}#app .layerOpt:hover .v-btn{box-shadow:0 0 2px #0d47a1}#app .layerOpt:hover .name{color:#0d47a1}#app .layerOpt.active .v-btn{border:1px solid #0d47a1}#app .layerOpt.active .name{color:#0d47a1}#app .districtMenu{width:320px}#app .districtMenu .area{position:relative;cursor:pointer;filter:brightness(.7)}#app .districtMenu .area:hover{transform:translate(-.2px,-.2px);filter:brightness(1)}#app .districtMenu .area .name{position:absolute;bottom:0;text-align:center;width:100%;color:#fff;font-size:150%}#app .districtMenu .area.other .name{position:relative;color:#3e2723}#app #panorama{position:absolute;z-index:5;top:50%;left:50%;transform:translate(-50%,-50%);width:100vw;height:100vh}#app #panorama .pnlm-controls{background-color:hsla(0,0%,100%,.5);position:absolute;transform:translateZ(9999px) scale(1.2);filter:invert(1)}#app #panorama .pnlm-controls-container{height:100%;right:50px;left:auto}#app #panorama .pnlm-controls-container .pnlm-zoom-controls{bottom:20px}#app #panorama .pnlm-controls-container .pnlm-fullscreen-toggle-button{top:5px}#app #panorama .pnlm-compass{cursor:pointer;right:10px;bottom:104px}",""]);const l=o},3520:(e,t,a)=>{"use strict";a(6992),a(8674),a(9601),a(7727);var s=a(144),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("div",{ref:"map",attrs:{id:"map"}}),a("v-dialog",{staticClass:"elevation-1",attrs:{"content-class":"PCIInfo","max-width":"650",persistent:"","hide-overlay":""},model:{value:e.PCIInfo.list.length,callback:function(t){e.$set(e.PCIInfo.list,"length",t)},expression:"PCIInfo.list.length"}},[a("v-card",[a("v-card-title",[a("v-btn",{attrs:{icon:"",absolute:"",right:""},on:{click:function(t){e.PCIInfo.list=[]}}},[a("v-icon",[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-data-table",{attrs:{headers:e.PCIInfo.headers,items:e.PCIInfo.list,options:{itemsPerPage:e.PCIInfo.list.length},"hide-default-footer":"",dense:""},scopedSlots:e._u([{key:"item.actions",fn:function(t){var s=t.item;return[a("v-icon",{attrs:{color:"red"},on:{click:function(t){return e.delPCIInfo(s)}}},[e._v("mdi-close-thick")])]}}])})],1),a("v-card-subtitle",[a("v-row",[a("v-col",[e._v("選取區塊數："+e._s(e.PCIInfoTotal.total))]),a("v-col",[e._v("面積合計："+e._s(e.PCIInfoTotal.areaTotal))]),a("v-col",[e._v("PCI平均："+e._s(e.PCIInfoTotal.scoreAverage))])],1)],1)],1)],1),a("div",{staticClass:"tool-bar"},[a("v-text-field",{ref:"searchBox",staticClass:"searchBox",attrs:{id:"searchBox","prepend-inner-icon":"mdi-menu","append-icon":"mdi-magnify","background-color":"#fff",placeholder:"區域或路名"},on:{change:e.search,"click:append":e.search,"click:prepend-inner":function(t){e.showNavMenu=!0}},model:{value:e.listQuery.searchText,callback:function(t){e.$set(e.listQuery,"searchText",t)},expression:"listQuery.searchText"}}),e.activeLayer.case?a("div",{staticClass:"case-filter"},[e._l(e.caseTypeListFilter,(function(t,s){return a("v-chip",{key:s,attrs:{"text-color":e.listQuery.caseType==s?"blue":"black"},on:{click:function(t){e.listQuery.caseType=s,e.setCaseLayer()}}},[e._v(e._s(t.name))])})),-1==e.listQuery.caseType?a("v-chip",{on:{click:function(t){e.listQuery.caseEtc=!e.listQuery.caseEtc}}},[e.listQuery.caseEtc?a("v-icon",{attrs:{color:"blue"}},[e._v("mdi-menu-left")]):a("span",[e._v(" 其他 "),a("v-icon",[e._v("mdi-menu-right")])],1)],1):e._e(),-1!=e.listQuery.caseType?a("span",[e.caseTypeListFilter[e.listQuery.caseType].hasOwnProperty("list")?a("v-menu",{attrs:{bottom:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-chip",e._g(e._b({},"v-chip",i,!1),s),[-1==e.listQuery.caseTypeSpec?a("span",[e._v("分類")]):a("span",[a("span",[e._v(e._s(e.caseTypeListFilter[e.listQuery.caseType].list[e.listQuery.caseTypeSpec]))])]),a("v-icon",{attrs:{right:""}},[e._v("mdi-menu-down")])],1)]}}],null,!1,1591294938)},[a("v-list",{attrs:{dense:"",flat:""}},[a("v-list-item-group",[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-title",{staticClass:"text-center",on:{click:function(t){e.listQuery.caseTypeSpec=-1,e.setCaseLayer()}}},[e._v("全部")])],1),e._l(e.caseTypeListFilter[e.listQuery.caseType].list,(function(t,s){return a("v-list-item",{key:s,staticClass:"pr-2 pl-2",attrs:{dense:""},on:{click:function(t){e.listQuery.caseTypeSpec=s,e.setCaseLayer()}}},[a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t))])],1)],1)}))],2)],1)],1):e._e(),a("v-menu",{attrs:{bottom:"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-chip",e._g(e._b({},"v-chip",i,!1),s),[-1==e.listQuery.caseLevel?a("span",[e._v("程度")]):a("span",[a("v-icon",{staticClass:"icon-shadow",attrs:{color:e.caseLevel[e.listQuery.caseLevel].color}},[e._v("mdi-map-marker-alert")]),a("span",[e._v(e._s(e.caseLevel[e.listQuery.caseLevel].description))])],1),a("v-icon",{attrs:{right:""}},[e._v("mdi-menu-down")])],1)]}}],null,!1,3024707018)},[a("v-list",{attrs:{dense:"",flat:""}},[a("v-list-item-group",[a("v-list-item",{attrs:{dense:""}},[a("v-list-item-title",{staticClass:"text-center",on:{click:function(t){e.listQuery.caseLevel=-1,e.setCaseLayer()}}},[e._v("全部")])],1),e._l(e.caseLevel,(function(t,s){return a("v-list-item",{key:s,staticClass:"pr-2 pl-2",attrs:{dense:""},on:{click:function(t){e.listQuery.caseLevel=s,e.setCaseLayer()}}},[a("v-list-item-icon",{staticClass:"mt-1 mr-1"},[a("v-icon",{staticClass:"icon-shadow",attrs:{color:t.color}},[e._v("mdi-map-marker-alert")])],1),a("v-list-item-content",[a("v-list-item-title",[e._v(e._s(t.description))])],1)],1)}))],2)],1)],1),a("v-chip",{attrs:{"text-color":"red"},on:{click:function(t){e.listQuery.caseType=-1,e.listQuery.caseTypeSpec=-1,e.listQuery.caseLevel=-1,e.setCaseLayer()}}},[e._v("取消")])],1):e._e()],2):e._e()],1),a("v-menu",{attrs:{top:"",rounded:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs,r=t.value;return[a("v-btn",e._g(e._b({staticClass:"btn_district",style:"background-color: "+e.districtList[e.listQuery.distIndex].color+";",attrs:{width:r?160:80,height:"80"}},"v-btn",i,!1),s),[r?a("v-row",e._g(e._b({staticClass:"distTitle",style:"background-color: "+e.districtList[e.listQuery.distIndex].color+";",attrs:{"no-gutters":""}},"v-row",i,!1),s),[a("v-col",{attrs:{cols:"6"}},[a("v-img",{attrs:{src:e.publicPath+"assets/images/district/"+e.districtList[e.listQuery.distIndex].img_S,width:"100%",height:"100%"}})],1),a("v-col",{staticClass:"description",attrs:{cols:"6"}},[a("div",{staticClass:"zhName"},[e._v(e._s(e.districtList[e.listQuery.distIndex].name))]),a("div",{staticClass:"engName"},[e._v(e._s(e.districtList[e.listQuery.distIndex].engName))])])],1):a("div",[a("v-img",{attrs:{src:e.publicPath+"assets/images/district/"+e.districtList[e.listQuery.distIndex].img_L,"max-heigh":"80","max-width":"80"}}),a("div",{staticClass:"name"},[e._v(e._s(e.districtList[e.listQuery.distIndex].name))])],1)],1)]}}]),model:{value:e.showDistrictMenu,callback:function(t){e.showDistrictMenu=t},expression:"showDistrictMenu"}},[a("v-card",{staticClass:"overflow-y-hidden",staticStyle:{background:"transparent"}},[a("v-row",{staticClass:"districtMenu",attrs:{"no-gutters":""}},[e._l(e.districtListFilter,(function(t,s){return a("v-col",{key:s,class:["area",{active:e.listQuery.distIndex==s}],attrs:{cols:"3"}},[a("v-btn",{style:"background-color: "+t.color+";",attrs:{width:"80",height:"80"},on:{click:function(t){return e.setDistIndex(s)}}},[a("v-img",{attrs:{src:e.publicPath+"assets/images/district/"+e.districtList[s].img_L,"max-heigh":"80","max-width":"80"}}),a("div",{staticClass:"name"},[e._v(e._s(t.name))])],1)],1)})),a("v-col",{staticClass:"area other",attrs:{offset:"6",cols:"3"}},[a("v-btn",{attrs:{width:"160",height:"80"}},[a("v-icon",{attrs:{dark:"",size:"40",color:"#BDBDBD"}},[e._v("mdi-layers-off")]),a("div",{staticClass:"name"},[e._v("清除")])],1)],1)],2)],1)],1),a("v-menu",{attrs:{"open-on-hover":"",top:"",rounded:"","offset-x":"",transition:"slide-x-transition",disabled:1==e.showLayerMenu},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({class:["btn_district",{hide:e.showDistrictMenu}],style:"background-color: "+e.districtList[e.listQuery.distIndex].color+";",attrs:{width:"80",height:"80"},on:{click:function(t){t.stopPropagation(),e.showDistrictMenu=!0}}},"v-btn",i,!1),s),[a("v-img",{attrs:{src:e.publicPath+"assets/images/district/"+e.districtList[e.listQuery.distIndex].img_L,"max-heigh":"80","max-width":"80"}}),a("div",{staticClass:"name"},[e._v(e._s(e.districtList[e.listQuery.distIndex].name))])],1)]}}])},[a("v-card",{staticClass:"pa-2 overflow-y-hidden"},[a("v-row",{attrs:{dense:""}},[e._l(e.layerList,(function(t,s){return a("v-col",{key:s,class:["layerOpt",{active:e.listQuery.layerType==s}],on:{click:function(t){return e.setLayer(s)}}},[a("v-btn",{attrs:{width:"40",height:"40",small:"",plain:""}},[a("v-icon",{attrs:{dark:"",size:"30",color:t.color}},[e._v(e._s(t.icon))])],1),a("div",{staticClass:"name"},[e._v(e._s(t.name))])],1)})),a("v-col",{staticClass:"layerOpt",on:{click:function(t){t.stopPropagation(),e.showLayerMenu=!0}}},[a("v-btn",{attrs:{width:"40",height:"40",small:"",plain:""}},[a("v-icon",{attrs:{dark:"",size:"30",color:"#BDBDBD"}},[e._v("mdi-layers")])],1),a("div",{staticClass:"name"},[e._v("更多")])],1)],2)],1)],1),a("v-dialog",{attrs:{"content-class":"layerMenu","max-width":"300","hide-overlay":""},model:{value:e.showLayerMenu,callback:function(t){e.showLayerMenu=t},expression:"showLayerMenu"}},[a("v-card",[a("v-btn",{attrs:{icon:"",absolute:"",right:""},on:{click:function(t){e.showLayerMenu=!1}}},[a("v-icon",[e._v("mdi-close")])],1),a("v-card-title",[e._v("詳細圖層")]),a("v-card-text",[a("v-row",{attrs:{dense:""}},e._l(e.layerList,(function(t,s){return a("v-col",{key:s,class:["layerOpt",{active:e.listQuery.layerType==s}],on:{click:function(t){return e.setLayer(s)}}},[a("v-btn",{attrs:{width:"55",height:"55",small:"",plain:""}},[a("v-icon",{attrs:{dark:"",size:"40",color:t.color}},[e._v(e._s(t.icon))])],1),a("div",{staticClass:"name"},[e._v(e._s(t.name))])],1)})),1)],1),a("v-divider",{staticStyle:{margin:"0 15px"}}),a("v-card-title",[e._v("地圖類型")]),a("v-card-text",[a("v-row",{attrs:{justify:"center",dense:""}},e._l(e.mapList,(function(t,s){return a("v-col",{key:s,class:["layerOpt",{active:e.listQuery.mapType==s}],on:{click:function(t){return e.setMapType(s)}}},[a("v-btn",{attrs:{width:"55",height:"55",small:"",plain:""}},[a("v-icon",{attrs:{dark:"",size:"40",color:t.color}},[e._v(e._s(t.icon))])],1),a("div",{staticClass:"name"},[e._v(e._s(t.name))])],1)})),1)],1)],1)],1),"PCI"==e.listQuery.layerType&&e.activeLayer.PCILayer?a("div",{staticClass:"PCILevelMenu outside"},[a("div",{staticClass:"title"},[e._v("PCI"),a("br"),e._v("鋪面狀況指數")]),e._l(e.PCILevelOrder,(function(t){return a("v-row",{key:t,class:["level",{active:e.listQuery.PCILevel.includes(t)}],attrs:{"no-gutters":"",align:"center",justify:"center"}},[a("v-col",{staticClass:"colorBlock",style:"background-color: "+e.PCILevel[t].color+";",attrs:{cols:"8"}},[a("div",{staticClass:"description"},[e._v(e._s(e.PCILevel[t].description))]),a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",i,!1),s),[a("v-icon",{attrs:{small:"",color:"white lighten-1"}},[e._v("mdi-help-circle")])],1)]}}],null,!0)},[a("span",[e._v(e._s(e.PCILevel[t].range))])])],1),a("v-col",{attrs:{cols:"4"}},[a("v-switch",{staticClass:"layer-switch",attrs:{value:t,flat:"","hide-details":"",dense:""},on:{change:function(t){e.activeLayer.PCILayer=!0,e.setPCILayer(),e.setCaseLayer()}},model:{value:e.listQuery.PCILevel,callback:function(t){e.$set(e.listQuery,"PCILevel",t)},expression:"listQuery.PCILevel"}})],1)],1)})),a("br"),e._l(Object.keys(e.areaList),(function(t){return a("v-row",{key:t,class:["level",{active:e.listQuery.PCILevel.includes(Number(t))}],style:"background-color: "+e.areaList[t].color+";",attrs:{"no-gutters":"",align:"center",justify:"center"},on:{click:function(a){e.setPCILayer(Number(t)),e.setCaseLayer()}}},[a("v-col",{attrs:{cols:"3"}},[a("v-icon",{attrs:{dark:""}},[e._v(e._s(e.areaList[t].icon))])],1),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"7"}},[a("div",{staticClass:"description"},[e._v(e._s(e.areaList[t].description))])])],1)}))],2):e._e(),a("v-navigation-drawer",{attrs:{app:"",absolute:"",temporary:""},model:{value:e.showNavMenu,callback:function(t){e.showNavMenu=t},expression:"showNavMenu"}},[a("template",{slot:"prepend"},[a("v-row",{staticClass:"distTitle",style:"background-color: "+e.districtList[e.listQuery.distIndex].color+";",attrs:{"no-gutters":""}},[a("v-col",[a("v-img",{attrs:{src:e.publicPath+"assets/images/district/"+e.districtList[e.listQuery.distIndex].img_S,width:"100%",height:"100%"}})],1),a("v-col",{staticClass:"description"},[a("div",{staticClass:"name"},[e._v(e._s(e.districtList[e.listQuery.distIndex].name))]),a("div",{staticClass:"engName"},[e._v(e._s(e.districtList[e.listQuery.distIndex].engName))])])],1),a("v-btn",{staticClass:"closeNavMenu",attrs:{icon:"",color:"#eee",absolute:"",right:""},on:{click:function(t){e.showNavMenu=!1}}},[a("v-icon",[e._v("mdi-close")])],1)],1)],2),a("div",{staticClass:"info-panel"},[a("v-card",{staticClass:"PCILevel",attrs:{elevation:"2",height:"35",width:"350"}},[a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"3"}},[a("span",{staticClass:"text-subtitle-2"},[e._v(e._s(e.layerList[e.listQuery.layerType].name))])]),a("v-col",{attrs:{cols:"7"}},[a("span",{staticClass:"caption"},[e._v("顯示"+e._s(e.layerList[e.listQuery.layerType].description))])]),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"2"}},["PCI"==e.listQuery.layerType?a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},model:{value:e.activeLayer.PCILayer,callback:function(t){e.$set(e.activeLayer,"PCILayer",t)},expression:"activeLayer.PCILayer"}}):"panorama"==e.listQuery.layerType?a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},on:{change:function(t){return e.setPanoramaLayer()}},model:{value:e.activeLayer.panoramaLayer,callback:function(t){e.$set(e.activeLayer,"panoramaLayer",t)},expression:"activeLayer.panoramaLayer"}}):a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},on:{change:function(t){return e.setDefaultLayer(e.listQuery.layerType)}},model:{value:e.activeLayer[e.listQuery.layerType+"Layer"],callback:function(t){e.$set(e.activeLayer,e.listQuery.layerType+"Layer",t)},expression:"activeLayer[`${listQuery.layerType}Layer`]"}})],1)],1)],1),e.activeLayer.PCILayer?a("v-card",{staticClass:"PCIhist",attrs:{elevation:"2",height:"110",width:"350"}},[a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"3"}},[a("span",{class:["text-subtitle-2",{"grey--text text--lighten-1":!e.activeLayer.PCI}]},[e._v("鋪面指標")])]),a("v-col",{staticClass:"level-block",attrs:{cols:"7","align-self":"center"}},[a("v-row",{attrs:{align:"center",justify:"center",dense:""}},[a("v-col",{staticClass:"grey--text text--darken-2",attrs:{cols:"2"}},[e._v("很好")]),e._l(e.PCILevelOrder,(function(t){return a("v-col",{key:t,staticClass:"level-color",style:"background-color: "+e.PCILevel[t].color})})),a("v-col",{staticClass:"grey--text text--darken-2",attrs:{cols:"3"}},[e._v("不合格")])],2)],1),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"2"}},[a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},on:{change:function(t){e.setPCILayer(),e.setCaseLayer()}},model:{value:e.activeLayer.PCI,callback:function(t){e.$set(e.activeLayer,"PCI",t)},expression:"activeLayer.PCI"}})],1)],1),a("v-divider"),a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"3"}},[a("span",{class:["text-subtitle-2",{"grey--text text--lighten-1":!e.activeLayer.case}]},[e._v("顯示案件")])]),a("v-col",{staticClass:"case-block",attrs:{cols:"7","align-self":"center"}},[a("v-row",{attrs:{align:"center",justify:"center",dense:""}},e._l(e.caseLevelOrder,(function(t){return a("v-col",{key:t,staticClass:"leave-text"},[a("v-icon",{staticClass:"icon-shadow",attrs:{color:e.caseLevel[t].color}},[e._v("mdi-map-marker-alert")]),a("span",{staticClass:"grey--text text--darken-2"},[e._v(e._s(e.caseLevel[t].description))])],1)})),1)],1),a("v-divider",{attrs:{vertical:""}}),a("v-divider",{attrs:{vertical:""}}),a("v-col",{attrs:{cols:"2"}},[a("v-switch",{staticClass:"PCIType-switch",attrs:{flat:"","hide-details":"",dense:""},on:{change:function(t){e.setPCILayer(),e.setCaseLayer()}},model:{value:e.activeLayer.case,callback:function(t){e.$set(e.activeLayer,"case",t)},expression:"activeLayer.case"}})],1)],1),a("v-divider"),a("v-row",{attrs:{"no-gutters":"",align:"center",justify:"center",dense:""}},[a("v-col",{attrs:{cols:"3"}},[a("v-select",{staticClass:"year-select",attrs:{items:e.timeSelectList.year,dense:"",solo:"",flat:"","hide-selected":"",disabled:1==e.timeSelectList.year.length},on:{input:function(t){e.setPCILayer(),e.setCaseLayer()}},model:{value:e.listQuery.year,callback:function(t){e.$set(e.listQuery,"year",t)},expression:"listQuery.year"}})],1),a("v-divider",{staticStyle:{"z-index":"1"},attrs:{vertical:""}}),a("v-col",{staticClass:"month-block",attrs:{cols:"9","align-self":"center"}},[a("v-slider",{attrs:{label:"月","tick-labels":e.timeSelectList.month,min:1,max:12,step:"1",ticks:"always","track-color":"#BDBDBD","inverse-label":"",dense:"","hide-details":""},on:{change:function(t){e.setPCILayer(),e.setCaseLayer()}},model:{value:e.listQuery.month,callback:function(t){e.$set(e.listQuery,"month",t)},expression:"listQuery.month"}})],1)],1)],1):e._e()],1),a("v-menu",{attrs:{bottom:"","min-width":"200px",rounded:"","offset-y":"",disabled:!e.isLogin},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on;return[a("v-btn",e._g({staticClass:"btn-avatar",attrs:{absolute:"",icon:"",large:"",right:"",dark:""},on:{click:function(t){e.isLogin||(e.showLoginDialog=!0)}}},s),[a("v-avatar",{attrs:{color:"#4DB6AC"}},[e.isLogin?a("span",{staticClass:"white--text text-h5"},[e._v(e._s(e.loginInfo.username[0].toUpperCase()))]):a("v-icon",{attrs:{dark:""}},[e._v("mdi-account-circle")])],1)],1)]}}])},[a("v-card",{staticClass:"mt-2"},[a("v-list-item-content",{staticClass:"justify-center"},[a("div",{staticClass:"mx-auto text-center"},[e.isLogin?[a("v-avatar",{staticClass:"my-2",attrs:{color:"#4DB6AC"}},[a("span",{staticClass:"white--text text-h5"},[e._v(e._s(e.loginInfo.username[0].toUpperCase()))])]),a("h3",[e._v(e._s(e.loginInfo.username))]),a("v-divider",{staticClass:"my-3"}),a("v-btn",{attrs:{depressed:"",rounded:"",text:""},on:{click:function(t){e.isLogin=!1,e.$refs.loginForm.reset()}}},[e._v("Logout")])]:e._e()],2)])],1)],1),a("v-btn",{staticClass:"btn-target",attrs:{absolute:"",plain:""},on:{click:e.setCenter}},[a("v-icon",[e._v("mdi-target")])],1),a("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.showLoginDialog,callback:function(t){e.showLoginDialog=t},expression:"showLoginDialog"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v("Login")]),a("v-card-text",[a("v-form",{ref:"loginForm"},[a("v-text-field",{attrs:{label:"帳號",rules:e.rules,"hide-details":"auto"},model:{value:e.loginInfo.username,callback:function(t){e.$set(e.loginInfo,"username",t)},expression:"loginInfo.username"}}),a("v-text-field",{attrs:{label:"密碼",type:"password",rules:e.rules,"hide-details":"auto"},model:{value:e.loginInfo.password,callback:function(t){e.$set(e.loginInfo,"password",t)},expression:"loginInfo.password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.showLoginDialog=!1,e.$refs.loginForm.reset()}}},[e._v("取消")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.showLoginDialog=!1,e.isLogin=!0}}},[e._v("確定")])],1)],1)],1),a("transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showPanorama,expression:"showPanorama"}],attrs:{id:"panorama"}})]),a("v-fade-transition",[e.showPanorama?a("v-btn",{staticClass:"btn_panorama",attrs:{width:"80",height:"80",color:"#FFCCBC"},on:{click:function(t){return e.showPanoramaLayer()}}},[a("v-icon",{attrs:{dark:"",size:"40",color:"#1B512D"}},[e._v("mdi-map")]),a("div",{staticClass:"name"},[e._v("返回地圖")])],1):e._e()],1)],1)},r=[],n=a(4367),o=a(7906),l=a(6198),c=a(5200),p=a(8932),d=a(2032),v=(a(9554),a(1539),a(4747),a(2222),a(3112),a(7941),a(4916),a(5306),a(8559),a(7327),a(9720),a(8309),a(2526),a(1817),a(2479),a(2772),a(5827),a(9653),a(3123),a(6977),a(3710),a(8783),a(3948),a(285),a(1637),a(1249),a(4603),a(8450),a(8386),a(9714),a(5212),a(6699),a(5735),a(3753),a(561),a(3311)),u=a(5153),h=a(4576),y="/testPage/",f="https://lancelin0410.github.io/testPage/",m={202107:7,202108:29,202109:15,202110:4,202111:26,202112:29,202201:30,202202:28,202203:31,202204:20,202205:23,202206:1,202207:2},g={apiKey:"",version:"weekly",language:"zh-TW",region:"TW",libraries:["places"]},L=new v.aN(g);const b={name:"MainPage",data:function(){return{configName:"demo",publicPath:y,isLogin:!1,showLoginDialog:!1,showNavMenu:!1,showDistrictMenu:!1,showPanorama:!1,showLayerMenu:!1,map:null,placeServer:null,kmlLayer:{PCILayer:{},caseLayer:{}},markers:{case:[]},infoWindow:null,markerClusterer:null,panorama:null,prevSceneId:[],polyLine:{},listQuery:{mapType:"roadmap",layerType:"PCI",PCILevel:[],caseType:-1,caseTypeSpec:-1,caseLevel:-1,caseEtc:!1,distIndex:0,searchText:"",year:2022,month:5},activeLayer:{PCILayer:!0,PCI:!0,case:!1,panoramaLayer:!1},rules:[function(e){return!!e||"請輸入"}],loginInfo:{username:"",password:""},timeSelectList:{year:[2022],month:[1,2,3,4,5,6,7,8,9,10,11,12]},mapList:{roadmap:{name:"地圖",icon:"mdi-map",color:"#2F4858"},hybrid:{name:"衛星",icon:"mdi-satellite",color:"#EDBBB4"}},layerList:{PCI:{type:"PCI",assetsUrl:"",name:"鋪面",description:"鋪面狀況",icon:"mdi-road-variant",color:"#AA9FB1"}},caseTypeList:{D40:{name:"坑洞"},D20:{name:"龜裂"},D21:{name:"人孔",list:{D21:"人手孔破損",D41:"人孔高差"}},D00:{name:"裂縫",list:{D01:"縱橫裂縫",D10:"塊狀裂縫",D00:"滑溜裂縫"}},etc:{name:"其他",list:{D30:{name:"車轍"},D42:{name:"薄層剝離"},D31:{name:"補綻"}}}},caseLevel:{2:{description:"輕度",color:"#FCFF6C"},1:{description:"中度",color:"#83781B"},0:{description:"重度",color:"#A31621"}},caseLevelOrder:[2,1,0],PCILevel:{6:{description:"很好",range:"85~100",color:"#00B900"},5:{description:"好",range:"70~85",color:"#C1FE00"},4:{description:"尚可",range:"55~70",color:"#FEFE00"},3:{description:"差",range:"40~55",color:"#F40088"},2:{description:"很差",range:"25~40",color:"#F40000"},1:{description:"嚴重",range:"10~25",color:"#A72126"},0:{description:"不合格",range:"0~10",color:"#666666"}},PCILevelOrder:[6,5,4,3,2,1,0],areaList:{7:{description:"變差區域",icon:"mdi-alert",color:"#E91E63"},8:{description:"變好區域",icon:"mdi-thumb-up",color:"#009688"}},districtList:{0:{name:"台北市",engName:"Taipei City",color:"#e2a1ff",img_L:"dist-ll-00.png",img_S:"dist-rs-00.png",position:{lat:25.0374865,lng:121.5647688}}},panoramaList:{},PCIInfo:{headers:[],list:[],regex:{},infoOrder:{}},markerList_test:{},panoramaList_test:{}}},computed:{streetViewList:function(){var e=this;if(!this.panoramaList.hasOwnProperty(this.listQuery.distIndex))return{};var t,a=this.panoramaList[this.listQuery.distIndex],s=this.layerList.panorama.assetsUrl,i=this.layerList.panorama.sceneSetting,r={},n=(0,d.Z)(a);try{var o=function(){var a=t.value;a.forEach((function(t,n){r[t.fileName]={type:"equirectangular",panorama:"".concat(s,"/").concat(e.listQuery.distIndex,"/").concat(t.fileName,".jpg"),hfov:i.hfov,yaw:i.yaw,horizonRoll:i.horizonRoll,compass:!0,northOffset:t.azimuth,autoLoad:!0};var o=[];n>=0&&n<a.length-1&&o.push({pitch:i.pitch,yaw:i.yaw,type:"scene",text:a[n+1].fileName,sceneId:a[n+1].fileName}),n>0&&n<a.length&&o.push({pitch:i.pitch,yaw:i.yaw+180,type:"scene",text:a[n-1].fileName,sceneId:a[n-1].fileName,targetYaw:i.yaw+180}),r[t.fileName]["hotSpots"]=o}))};for(n.s();!(t=n.n()).done;)o()}catch(l){n.e(l)}finally{n.f()}return r},PCIKMLUrl:function(){for(var e=this.layerList.PCI.assetsUrl,t=this.listQuery.year+String(this.listQuery.month).padStart(2,"0"),a={},s=0,i=[].concat((0,p.Z)(Object.keys(this.PCILevel)),(0,p.Z)(Object.keys(this.areaList)));s<i.length;s++){var r=i[s];"demo"==this.configName?a[r]="".concat(e,"/kml/PCI/").concat(t,"/3_1_").concat(this.listQuery.distIndex,"_P").concat(r,"_").concat(m[t],".KML"):"freeway"==this.configName&&(a[r]=e.replace("${level}",r))}return a},caseKMLUrl:function(){for(var e=this.layerList.PCI.assetsUrl,t=this.listQuery.year+String(this.listQuery.month).padStart(2,"0"),a={},s=0,i=[].concat((0,p.Z)(Object.keys(this.PCILevel)),(0,p.Z)(Object.keys(this.areaList)));s<i.length;s++){var r=i[s];"demo"==this.configName?a[r]="".concat(this.publicPath,"assets/kml/PCI/").concat(t,"/3_1_").concat(this.listQuery.distIndex,"_1pointP_").concat(r,"_").concat(m[t],".KML"):"freeway"==this.configName&&(a[r]=e.replace("${level}","Case"))}return a},districtListFilter:function(){var e=this;return Object.fromEntries(Object.entries(this.districtList).filter((function(t){var a=(0,c.Z)(t,2),s=a[0];a[1];return s!=e.listQuery.distIndex})))},caseTypeListFilter:function(){var e=this,t=Object.fromEntries(Object.entries(this.caseTypeList).filter((function(e){var t=(0,c.Z)(e,2),a=t[0];t[1];return"etc"!=a})));return this.listQuery.caseEtc&&Object.assign(t,this.caseTypeList.etc.list),-1!=this.listQuery.caseType&&(t=Object.fromEntries(Object.entries(t).filter((function(t){var a=(0,c.Z)(t,2),s=a[0];a[1];return s==e.listQuery.caseType})))),t},markersFilter:function(){if(-1==this.listQuery.caseType&&-1==this.listQuery.caseLevel&&-1==this.listQuery.caseTypeSpec)return this.markers["case"];var e=this.caseTypeListFilter[this.listQuery.caseType],t=-1==this.listQuery.caseTypeSpec?"".concat(e.name):"".concat(e.list[this.listQuery.caseTypeSpec]);if("D30"==this.listQuery.caseType&&(t+="隆起"),-1!=this.listQuery.caseLevel&&(t+="（".concat(this.caseLevel[this.listQuery.caseLevel].description,"）")),"D21"==this.listQuery.caseType&&-1==this.listQuery.caseTypeSpec){for(var a=[],s=0,i=Object.values(e.list);s<i.length;s++){var r=i[s];-1!=this.listQuery.caseLevel&&(r+="（".concat(this.caseLevel[this.listQuery.caseLevel].description,"）")),a.push(r)}return this.markers["case"].filter((function(e){var t,s=(0,d.Z)(a);try{for(s.s();!(t=s.n()).done;){var i=t.value;return-1!=e.description.indexOf(i)}}catch(r){s.e(r)}finally{s.f()}}))}return this.markers["case"].filter((function(e){return-1!=e.description.indexOf(t)}))},PCIInfoTotal:function(){var e=0|this.PCIInfo.list.length,t=this.PCIInfo.list.reduce((function(e,t){return e+Number(t.area)}),0),a=this.PCIInfo.list.reduce((function(e,t){return Number(t.score)?e+=Number(t.score):e+=Number(t.score.split("→")[1]),e}),0)/e;return{total:e,areaTotal:t,scoreAverage:a.toFixed(2)}}},created:function(){var e=this,t=(new Date).getTime();t>sessionStorage.dueTime&&sessionStorage.clear();var a=new URL(window.location.href);this.configName=a.searchParams.get("c")||"demo",fetch("".concat(this.publicPath,"assets/config/").concat(this.configName,".json")).then(function(){var t=(0,l.Z)((0,o.Z)().mark((function t(a){var s,i,r,n,c,p,d,v;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.json();case 2:for(c in s=t.sent,i=s.layerList,r=s.districtList,n=s.PCIInfo,e.districtList=r,e.listQuery.distIndex=Object.keys(e.districtList)[0],e.layerList=i,e.layerList)e.kmlLayer.hasOwnProperty("".concat(c,"Layer"))||e.$set(e.kmlLayer,"".concat(c,"Layer"),null),e.activeLayer.hasOwnProperty("".concat(c,"Layer"))||e.$set(e.activeLayer,"".concat(c,"Layer"),!1),e.layerList[c].assetsUrl=e.layerList[c].assetsUrl.replace("${WebUrl}",f);for(v in e.PCIInfo.headers=n.headers,e.PCIInfo.regex=n.regex,e.PCIInfo.headers.forEach((function(t,a){return e.PCIInfo.infoOrder[t.value]=a})),p=i.panorama.streetViewJSON,d=function(t){var a=p[t].replace("${publicPath}",e.publicPath);fetch(a).then(function(){var a=(0,l.Z)((0,o.Z)().mark((function a(s){var i;return(0,o.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s.json();case 2:i=a.sent,e.panoramaList[t]=i.data;case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},p)d(v);window.gm_authFailure=function(){console.log("Google Map Failure"),sessionStorage.devMode=!0,sessionStorage.dueTime=(new Date).getTime()+3e5,location.reload()},L.load().then((function(){return e.initMap()}))["catch"]((function(e){return console.log("err: ",e)}));case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())["catch"]((function(e){console.log(e),window.location.href=a.origin+a.pathname}))},mounted:function(){var e=this;for(var t in this.listQuery.PCILevel=this.PCILevelOrder,this.panorama=pannellum.viewer("panorama",{scenes:{}}),this.panoramaList_test)this.panorama.addScene(t,this.panoramaList_test[t]);this.panorama.on("load",(function(){return e.panorama.resize()})),this.$el.querySelector(".pnlm-compass").addEventListener("click",(function(){var t=e.panorama.getNorthOffset();e.panorama.setYaw(-t)}))},watch:{"activeLayer.PCILayer":function(e){e?(this.activeLayer.PCI=!0,this.activeLayer["case"]=!1,0==this.listQuery.PCILevel.length&&(this.listQuery.PCILevel=this.PCILevelOrder)):(this.activeLayer.PCI=this.activeLayer["case"]=!1,this.listQuery.PCILevel=[]),this.setPCILayer(),this.setCaseLayer()}},methods:{initMap:function(){var e=this,t=this.districtList[this.listQuery.distIndex].position;if(this.map=new google.maps.Map(this.$refs.map,{center:t,zoom:13,maxZoom:19,fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1,styles:[{stylers:[{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}]}),0!=g.apiKey.length){var a=new google.maps.StyledMapType([{stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"}]}],{name:"Labels"});this.map.overlayMapTypes.push(a)}this.placeServer=new google.maps.places.PlacesService(this.map);for(var s=function(){var t=r[i];e.kmlLayer.PCILayer[t]=new google.maps.KmlLayer({url:e.PCIKMLUrl[t],map:e.map,suppressInfoWindows:!0,preserveViewport:!0}),e.kmlLayer.PCILayer[t].addListener("click",(function(a){var s=a.featureData.name,i=t>=7?e.PCIInfo.regex.changed:e.PCIInfo.regex["default"],r=new RegExp(i,"s"),n=s.split(r).filter((function(e){return 0!=e.length})),o=e.PCIInfo.list.some((function(e){return e.order==n[0]}));if(!o){var l,c={},p=(0,d.Z)(e.PCIInfo.headers);try{for(p.s();!(l=p.n()).done;){var v=l.value,u=e.PCIInfo.infoOrder[v.value];t<7||"score"!=v.value?c[v.value]=n[u]:c[v.value]="".concat(n[u]," → ").concat(n[u+1])}}catch(h){p.e(h)}finally{p.f()}e.PCIInfo.list.push(c)}}))},i=0,r=[].concat((0,p.Z)(Object.keys(this.PCILevel)),(0,p.Z)(Object.keys(this.areaList)));i<r.length;i++)s();for(var n in this.markerClusterer=new h.XL({map:this.map,markers:[]}),this.infoWindow=new google.maps.InfoWindow({}),this.kmlLayer)"PCILayer"!=n&&"caseLayer"!=n&&(this.kmlLayer[n]=new google.maps.KmlLayer({map:this.map,preserveViewport:!0}));var o=function(t){e.markers[t]=new google.maps.Marker({title:t,position:e.markerList_test[t]}),e.markers[t].addListener("click",(function(a){var s=e.markers[t].getTitle();console.log(s),e.showPanoramaLayer(s)}))};for(var l in this.markerList_test)o(l)},setCenter:function(){var e=this.districtList[this.listQuery.distIndex].position;this.map.setCenter(e),this.map.getZoom()<13&&this.map.setZoom(13)},setMapType:function(e){this.map.setMapTypeId(e),this.listQuery.mapType=e},search:function(){var e=this;if(0==g.apiKey.length)for(var t in this.districtList)this.listQuery.distIndex!=t&&-1!=this.districtList[t].name.indexOf(this.listQuery.searchText)&&this.setDistIndex(t);else{var a={fields:["geometry"],query:this.listQuery.searchText};this.placeServer.findPlaceFromQuery(a,(function(t,a){a===google.maps.places.PlacesServiceStatus.OK&&t&&e.map.setCenter(t[0].geometry.location),e.map.fitBounds(t[0].geometry.viewport)}))}},setLayer:function(e){for(var t in this.showLayerMenu=!1,this.clearAllLayer(),this.activeLayer)this.activeLayer[t]=!1;this.activeLayer["".concat(e,"Layer")]=!0;var a=this.layerList[e].type;switch(a){case"PCI":this.setPCILayer();break;case"panorama":this.PCIInfo.list=[],this.setPanoramaLayer();break;case"default":this.setDefaultLayer(e);break}},setDistIndex:function(e){this.showDistrictMenu=!1,this.clearAllLayer(),void 0!=e&&(this.listQuery.distIndex=Number(e)),this.setCenter(),this.setPCILayer(),this.setCaseLayer(),this.setPanoramaLayer()},setPCILayer:function(e){for(var t=0,a=Object.entries(this.kmlLayer.PCILayer);t<a.length;t++){var s=(0,c.Z)(a[t],2),i=(s[0],s[1]);i.setMap(null)}if(this.activeLayer.PCI){-2==e&&(this.listQuery.PCILevel=this.PCILevelOrder),e>=-1&&(this.listQuery.PCILevel=[]),e>-1&&(this.listQuery.PCILevel=[e],this.PCIInfo.list=[]);var r=this.listQuery.PCILevel.filter((function(e){return![7,8].includes(e)}));r.length>0&&(this.listQuery.PCILevel=r,this.PCIInfo.list=[]);var n,o=(0,d.Z)(this.listQuery.PCILevel);try{for(o.s();!(n=o.n()).done;){var l=n.value;console.log(this.PCIKMLUrl[l]),this.kmlLayer.PCILayer[l].setUrl(this.PCIKMLUrl[l]),null==this.kmlLayer.PCILayer[l].getMap()&&this.kmlLayer.PCILayer[l].setMap(this.map)}}catch(p){o.e(p)}finally{o.f()}this.listQuery.layerType="PCI"}},setCaseLayer:function(){var e=this;return(0,l.Z)((0,o.Z)().mark((function t(){var a,s,i;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.markerClusterer.clearMarkers(),e.markers["case"]=[],e.activeLayer["case"]){t.next=4;break}return t.abrupt("return");case 4:a=(0,d.Z)(e.listQuery.PCILevel),t.prev=5,i=(0,o.Z)().mark((function t(){var a,i;return(0,o.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=s.value,i=void 0,t.next=4,fetch(e.caseKMLUrl[a]).then((function(e){return e.text()})).then((function(t){i=(0,u.DS)((new DOMParser).parseFromString(t,"text/xml"));var a,s=(0,d.Z)(i.features);try{var r=function(){var t=a.value,s=new google.maps.LatLng(t.geometry.coordinates[1],t.geometry.coordinates[0]),i=new google.maps.Marker({position:s,description:t.properties.description.value,icon:{url:t.properties.icon,scaledSize:new google.maps.Size(30,30)}});e.markers["case"].push(i),google.maps.event.addListener(i,"click",(function(t){var a=i.description.replace('border="1"','border="0"');e.infoWindow.setContent(a),e.infoWindow.setPosition(t.latLng),e.infoWindow.open(e.map)}))};for(s.s();!(a=s.n()).done;)r()}catch(n){s.e(n)}finally{s.f()}e.markerClusterer.addMarkers(e.markersFilter)}));case 4:case"end":return t.stop()}}),t)})),a.s();case 8:if((s=a.n()).done){t.next=12;break}return t.delegateYield(i(),"t0",10);case 10:t.next=8;break;case 12:t.next=17;break;case 14:t.prev=14,t.t1=t["catch"](5),a.e(t.t1);case 17:return t.prev=17,a.f(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[5,14,17,20]])})))()},setDefaultLayer:function(e){this.kmlLayer["".concat(e,"Layer")].setMap(null),this.activeLayer["".concat(e,"Layer")]&&(this.kmlLayer["".concat(e,"Layer")].setUrl(this.layerList[e].assetsUrl),null==this.kmlLayer["".concat(e,"Layer")].getMap()&&this.kmlLayer["".concat(e,"Layer")].setMap(this.map),this.listQuery.layerType=e)},setPanoramaLayer:function(){for(var e=0,t=Object.values(this.polyLine);e<t.length;e++)for(var a=t[e],s=0,i=Object.values(a);s<i.length;s++){var r=i[s];r.setMap(null)}if(this.activeLayer.panoramaLayer){this.createPolyLine();for(var n=0,o=Object.values(this.markers);n<o.length;n++){var l=o[n];l.setMap(this.map)}this.listQuery.layerType="panorama"}},createPolyLine:function(){var e=this;this.polyLine[this.listQuery.distIndex]=[];var t=this.panoramaList[this.listQuery.distIndex];if(t){var a,s=(0,d.Z)(this.prevSceneId);try{for(s.s();!(a=s.n()).done;){var i=a.value;this.panorama.removeScene(i)}}catch(p){s.e(p)}finally{s.f()}for(var r in this.prevSceneId=[],this.streetViewList)this.panorama.addScene(r,this.streetViewList[r]),this.prevSceneId.push(r);if(this.polyLine[this.listQuery.distIndex].length>0){var o,l=(0,d.Z)(this.polyLine[this.listQuery.distIndex]);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.setMap(this.map)}}catch(p){l.e(p)}finally{l.f()}}else t.forEach((function(t,a){e.polyLine[e.listQuery.distIndex].push(new google.maps.Polyline({path:t.map((function(e){return e.position})),geodesic:!0,strokeColor:"#2196F3",strokeOpacity:1,strokeWeight:3,map:e.map})),e.polyLine[e.listQuery.distIndex][a].addListener("click",(function(t){var s=t.latLng.toJSON(),i=e.panoramaList[e.listQuery.distIndex][a].map((function(e){return(0,n.Z)((0,n.Z)({},e.position),{},{sceneId:e.fileName})})),r=i.reduce((function(e,t){var a=Math.sqrt(Math.pow(s.lat-t.lat,2)+Math.pow(s.lng-t.lng,2));return e.dist>a&&(e.dist=a,e.sceneId=t.sceneId),e}),{dist:1/0,sceneId:""});e.showPanoramaLayer(r.sceneId)}))}))}},showPanoramaLayer:function(e){if(this.showPanorama)return this.showPanorama=!1,this.activeLayer.PCILayer=!1,void(this.activeLayer.panoramaLayer=!0);console.log(e),this.panorama.loadScene(e),this.showPanorama=!0},clearAllLayer:function(){for(var e=0,t=Object.entries(this.kmlLayer.PCILayer);e<t.length;e++){var a=(0,c.Z)(t[e],2),s=(a[0],a[1]);s.setMap(null)}this.markerClusterer.clearMarkers();for(var i=0,r=Object.entries(this.kmlLayer);i<r.length;i++){var n=(0,c.Z)(r[i],2),o=n[0],l=n[1];"PCILayer"!=o&&"caseLayer"!=o&&l.setMap(null)}for(var p=0,d=Object.values(this.polyLine);p<d.length;p++)for(var v=d[p],u=0,h=Object.values(v);u<h.length;u++){var y=h[u];y.setMap(null)}},delPCIInfo:function(e){var t=this.PCIInfo.list.indexOf(e);this.PCIInfo.list.splice(t,1)}}},C=b;a(5940);var x=a(1001),_=a(3453),I=a.n(_),w=a(3167),P=a(1578),k=a(8704),Q=a(2371),T=a(7118),M=a(8675),O=a(2102),S=a(2166),Z=a(8366),D=a(8331),j=a(3493),N=a(6232),V=a(4926),z=a(9839),F=a(3920),B=a(8681),$=a(7996),E=a(3632),U=a(459),A=a(1217),K=a(6797),W=a(2877),q=a(2018),R=a(1067),J=a(9762),Y=a(3180),X=a(8687),G=a(6767),H=(0,x.Z)(C,i,r,!1,null,null,null);const ee=H.exports;I()(H,{VApp:w.Z,VAvatar:P.Z,VBtn:k.Z,VCard:Q.Z,VCardActions:T.h7,VCardSubtitle:T.Qq,VCardText:T.ZB,VCardTitle:T.EB,VChip:M.Z,VCol:O.Z,VDataTable:S.Z,VDialog:Z.Z,VDivider:D.Z,VFadeTransition:j.Z5,VForm:N.Z,VIcon:V.Z,VImg:z.Z,VList:F.Z,VListItem:B.Z,VListItemContent:$.km,VListItemGroup:E.Z,VListItemIcon:U.Z,VListItemTitle:$.V9,VMenu:A.Z,VNavigationDrawer:K.Z,VRow:W.Z,VSelect:q.Z,VSlider:R.Z,VSpacer:J.Z,VSwitch:Y.Z,VTextField:X.Z,VTooltip:G.Z});var te=a(8813);s.Z.use(te.Z);const ae=new te.Z({});s.Z.config.productionTip=!1,new s.Z({vuetify:ae,render:function(e){return e(ee)}}).$mount("#app")},5940:(e,t,a)=>{var s=a(7663);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var i=a(4402).Z;i("803d642c",s,!0,{sourceMap:!1,shadowMode:!1})}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={id:s,exports:{}};return e[s](r,r.exports,a),r.exports}a.m=e,(()=>{var e=[];a.O=(t,s,i,r)=>{if(!s){var n=1/0;for(p=0;p<e.length;p++){for(var[s,i,r]=e[p],o=!0,l=0;l<s.length;l++)(!1&r||n>=r)&&Object.keys(a.O).every((e=>a.O[e](s[l])))?s.splice(l--,1):(o=!1,r<n&&(n=r));if(o){e.splice(p--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var p=e.length;p>0&&e[p-1][2]>r;p--)e[p]=e[p-1];e[p]=[s,i,r]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={143:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var i,r,[n,o,l]=s,c=0;if(n.some((t=>0!==e[t]))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var p=l(a)}for(t&&t(s);c<n.length;c++)r=n[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(p)},s=self["webpackChunkmap_test"]=self["webpackChunkmap_test"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[998],(()=>a(3520)));s=a.O(s)})();
//# sourceMappingURL=app.7d4cce12.js.map